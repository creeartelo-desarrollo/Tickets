/*!
 * bootstrap-fileinput v4.4.1
 * http://plugins.krajee.com/file-input
 *
 * Author: Kartik Visweswaran
 * Copyright: 2014 - 2017, Kartik Visweswaran, Krajee.com
 *
 * Licensed under the BSD 3-Clause
 * https://github.com/kartik-v/bootstrap-fileinput/blob/master/LICENSE.md
 */!function(a){"use strict";"function"==typeof define&&define.amd?define(["jquery"],a):"object"==typeof module&&module.exports?module.exports=a(require("jquery")):a(window.jQuery)}(function(a){"use strict";a.fn.fileinputLocales={},a.fn.fileinputThemes={},String.prototype.setTokens=function(a){var c,d,b=this.toString();for(c in a)a.hasOwnProperty(c)&&(d=new RegExp("{"+c+"}","g"),b=b.replace(d,a[c]));return b};var b,c;b={FRAMES:".kv-preview-thumb",SORT_CSS:"file-sortable",STYLE_SETTING:'style="width:{width};height:{height};"',OBJECT_PARAMS:'<param name="controller" value="true" />\n<param name="allowFullScreen" value="true" />\n<param name="allowScriptAccess" value="always" />\n<param name="autoPlay" value="false" />\n<param name="autoStart" value="false" />\n<param name="quality" value="high" />\n',DEFAULT_PREVIEW:'<div class="file-preview-other">\n<span class="{previewFileIconClass}">{previewFileIcon}</span>\n</div>',MODAL_ID:"kvFileinputModal",MODAL_EVENTS:["show","shown","hide","hidden","loaded"],objUrl:window.URL||window.webkitURL,compare:function(a,b,c){return void 0!==a&&(c?a===b:a.match(b))},isIE:function(a){if("Microsoft Internet Explorer"!==navigator.appName)return!1;if(10===a)return new RegExp("msie\\s"+a,"i").test(navigator.userAgent);var c,b=document.createElement("div");return b.innerHTML="\x3c!--[if IE "+a+"]> <i></i> <![endif]--\x3e",c=b.getElementsByTagName("i").length,document.body.appendChild(b),b.parentNode.removeChild(b),c},initModal:function(b){var c=a("body");c.length&&b.appendTo(c)},isEmpty:function(b,c){return void 0===b||null===b||0===b.length||c&&""===a.trim(b)},isArray:function(a){return Array.isArray(a)||"[object Array]"===Object.prototype.toString.call(a)},ifSet:function(a,b,c){return c=c||"",b&&"object"==typeof b&&a in b?b[a]:c},cleanArray:function(a){return a instanceof Array||(a=[]),a.filter(function(a){return void 0!==a&&null!==a})},spliceArray:function(a,b){var c,d=0,e=[];if(!(a instanceof Array))return[];for(c=0;c<a.length;c++)c!==b&&(e[d]=a[c],d++);return e},getNum:function(a,b){return b=b||0,"number"==typeof a?a:("string"==typeof a&&(a=parseFloat(a)),isNaN(a)?b:a)},hasFileAPISupport:function(){return!(!window.File||!window.FileReader)},hasDragDropSupport:function(){var a=document.createElement("div");return!b.isIE(9)&&(void 0!==a.draggable||void 0!==a.ondragstart&&void 0!==a.ondrop)},hasFileUploadSupport:function(){return b.hasFileAPISupport()&&window.FormData},addCss:function(a,b){a.removeClass(b).addClass(b)},getElement:function(c,d,e){return b.isEmpty(c)||b.isEmpty(c[d])?e:a(c[d])},uniqId:function(){return Math.round((new Date).getTime()+100*Math.random())},htmlEncode:function(a){return a.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&apos;")},replaceTags:function(b,c){var d=b;return c?(a.each(c,function(a,b){"function"==typeof b&&(b=b()),d=d.split(a).join(b)}),d):d},cleanMemory:function(a){var c=a.is("img")?a.attr("src"):a.find("source").attr("src");b.objUrl.revokeObjectURL(c)},findFileName:function(a){var b=a.lastIndexOf("/");return-1===b&&(b=a.lastIndexOf("\\")),a.split(a.substring(b,b+1)).pop()},checkFullScreen:function(){return document.fullscreenElement||document.mozFullScreenElement||document.webkitFullscreenElement||document.msFullscreenElement},toggleFullScreen:function(a){var c=document,d=c.documentElement;d&&a&&!b.checkFullScreen()?d.requestFullscreen?d.requestFullscreen():d.msRequestFullscreen?d.msRequestFullscreen():d.mozRequestFullScreen?d.mozRequestFullScreen():d.webkitRequestFullscreen&&d.webkitRequestFullscreen(Element.ALLOW_KEYBOARD_INPUT):c.exitFullscreen?c.exitFullscreen():c.msExitFullscreen?c.msExitFullscreen():c.mozCancelFullScreen?c.mozCancelFullScreen():c.webkitExitFullscreen&&c.webkitExitFullscreen()},moveArray:function(a,b,c){if(c>=a.length)for(var d=c-a.length;1+d--;)a.push(void 0);return a.splice(c,0,a.splice(b,1)[0]),a},cleanZoomCache:function(a){var b=a.closest(".kv-zoom-cache-theme");b.length||(b=a.closest(".kv-zoom-cache")),b.remove()},setOrientation:function(a,b){var f,g,h,c=new DataView(a),d=0,e=1;if(!(65496!==c.getUint16(d)||a.length<2)){for(d+=2,f=c.byteLength;d<f-2;)switch(g=c.getUint16(d),d+=2,g){case 65505:h=c.getUint16(d),f=h-d,d+=2;break;case 274:e=c.getUint16(d+6,!1),f=0}b&&b(e)}},validateOrientation:function(a,c){if(window.FileReader&&window.DataView){var e,d=new FileReader;d.onloadend=function(){e=d.result,b.setOrientation(e,c)},d.readAsArrayBuffer(a)}},adjustOrientedImage:function(a,b){var c,d,e;if(a.hasClass("is-portrait-gt4")){if(b)return void a.css({width:a.parent().height()});a.css({height:"auto",width:a.height()}),c=a.parent().offset().top,d=a.offset().top,e=c-d,a.css("margin-top",e)}}},c=function(c,d){var e=this;e.$element=a(c),e._validate()&&(e.isPreviewable=b.hasFileAPISupport(),e.isIE9=b.isIE(9),e.isIE10=b.isIE(10),e.isPreviewable||e.isIE9?(e._init(d),e._listen()):e.$element.removeClass("file-loading"))},c.prototype={constructor:c,_cleanup:function(){var a=this;a.reader=null,a.formdata={},a.uploadCount=0,a.uploadStatus={},a.uploadLog=[],a.uploadAsyncCount=0,a.loadedImages=[],a.totalImagesCount=0,a.ajaxRequests=[],a.clearStack(),a.fileInputCleared=!1,a.fileBatchCompleted=!0,a.isPreviewable||(a.showPreview=!1),a.isError=!1,a.ajaxAborted=!1,a.cancelling=!1},_init:function(c){var f,g,d=this,e=d.$element;d.options=c,a.each(c,function(a,c){switch(a){case"minFileCount":case"maxFileCount":case"minFileSize":case"maxFileSize":case"maxFilePreviewSize":case"resizeImageQuality":case"resizeIfSizeMoreThan":case"progressUploadThreshold":case"initialPreviewCount":case"zoomModalHeight":case"minImageHeight":case"maxImageHeight":case"minImageWidth":case"maxImageWidth":d[a]=b.getNum(c);break;default:d[a]=c}}),d._cleanup(),d.$form=e.closest("form"),d._initTemplateDefaults(),d.uploadFileAttr=b.isEmpty(e.attr("name"))?"file_data":e.attr("name"),g=d._getLayoutTemplate("progress"),d.progressTemplate=g.replace("{class}",d.progressClass),d.progressCompleteTemplate=g.replace("{class}",d.progressCompleteClass),d.progressErrorTemplate=g.replace("{class}",d.progressErrorClass),d.dropZoneEnabled=b.hasDragDropSupport()&&d.dropZoneEnabled,d.isDisabled=e.attr("disabled")||e.attr("readonly"),d.isDisabled&&e.attr("disabled",!0),d.isUploadable=b.hasFileUploadSupport()&&!b.isEmpty(d.uploadUrl),d.isClickable=d.browseOnZoneClick&&d.showPreview&&(d.isUploadable&&d.dropZoneEnabled||!b.isEmpty(d.defaultPreviewContent)),d.slug="function"==typeof c.slugCallback?c.slugCallback:d._slugDefault,d.mainTemplate=d.showCaption?d._getLayoutTemplate("main1"):d._getLayoutTemplate("main2"),d.captionTemplate=d._getLayoutTemplate("caption"),d.previewGenericTemplate=d._getPreviewTemplate("generic"),d.resizeImage&&(d.maxImageWidth||d.maxImageHeight)&&(d.imageCanvas=document.createElement("canvas"),d.imageCanvasContext=d.imageCanvas.getContext("2d")),b.isEmpty(e.attr("id"))&&e.attr("id",b.uniqId()),d.namespace=".fileinput_"+e.attr("id").replace(/-/g,"_"),void 0===d.$container?d.$container=d._createContainer():d._refreshContainer(),f=d.$container,d.$dropZone=f.find(".file-drop-zone"),d.$progress=f.find(".kv-upload-progress"),d.$btnUpload=f.find(".fileinput-upload"),d.$captionContainer=b.getElement(c,"elCaptionContainer",f.find(".file-caption")),d.$caption=b.getElement(c,"elCaptionText",f.find(".file-caption-name")),d.$previewContainer=b.getElement(c,"elPreviewContainer",f.find(".file-preview")),d.$preview=b.getElement(c,"elPreviewImage",f.find(".file-preview-thumbnails")),d.$previewStatus=b.getElement(c,"elPreviewStatus",f.find(".file-preview-status")),d.$errorContainer=b.getElement(c,"elErrorContainer",d.$previewContainer.find(".kv-fileinput-error")),b.isEmpty(d.msgErrorClass)||b.addCss(d.$errorContainer,d.msgErrorClass),d.$errorContainer.hide(),d.previewInitId="preview-"+b.uniqId(),d._initPreviewCache(),d._initPreview(!0),d._initPreviewActions(),d._setFileDropZoneTitle(),e.removeClass("file-loading"),e.attr("disabled")&&d.disable(),d._initZoom()},_initTemplateDefaults:function(){var d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B,C,D,E,F,G,H,I,J,K,L,M,c=this;d='{preview}\n<div class="kv-upload-progress hide"></div>\n<div class="input-group {class}">\n   {caption}\n   <div class="input-group-btn">\n       {remove}\n       {cancel}\n       {upload}\n       {browse}\n   </div>\n</div>',e='{preview}\n<div class="kv-upload-progress hide"></div>\n{remove}\n{cancel}\n{upload}\n{browse}\n',f='<div class="file-preview {class}">\n    {close}    <div class="{dropClass}">\n    <div class="file-preview-thumbnails">\n    </div>\n    <div class="clearfix"></div>    <div class="file-preview-status text-center text-success"></div>\n    <div class="kv-fileinput-error"></div>\n    </div>\n</div>',h='<div class="close fileinput-remove">&times;</div>\n',g='<i class="fa fa-file kv-caption-icon"></i>',i='<div tabindex="500" class="form-control file-caption {class}">\n   <div class="file-caption-name"></div>\n</div>\n',j='<button type="{type}" tabindex="500" title="{title}" class="{css}" {status}>{icon} {label}</button>',k='<a href="{href}" tabindex="500" title="{title}" class="{css}" {status}>{icon} {label}</a>',l='<div tabindex="500" class="{css}" {status}>{icon} {label}</div>',m='<div id="'+b.MODAL_ID+'" class="file-zoom-dialog modal fade" tabindex="-1" aria-labelledby="'+b.MODAL_ID+'Label"></div>',n='<div class="modal-dialog modal-lg" role="document">\n  <div class="modal-content">\n    <div class="modal-header">\n      <div class="kv-zoom-actions pull-right">{toggleheader}{fullscreen}{borderless}{close}</div>\n      <h3 class="modal-title">{heading} <small><span class="kv-zoom-title"></span></small></h3>\n    </div>\n    <div class="modal-body">\n      <div class="floating-buttons"></div>\n      <div class="kv-zoom-body file-zoom-content {zoomFrameClass}"></div>\n{prev} {next}\n    </div>\n  </div>\n</div>\n',o='<div class="progress">\n    <div class="{class}" role="progressbar" aria-valuenow="{percent}" aria-valuemin="0" aria-valuemax="100" style="width:{percent}%;">\n        {status}\n     </div>\n</div>',p=" <samp>({sizeText})</samp>",q='<div class="file-thumbnail-footer">\n    <div class="file-footer-caption" title="{caption}">{caption}<br>{size}</div>\n    {progress} {indicator} {actions}\n</div>',r='{drag}\n<div class="file-actions">\n    <div class="file-footer-buttons">\n        {upload} {delete} {zoom} {other}    </div>\n    <div class="clearfix"></div>\n</div>',s='<button type="button" class="kv-file-remove {removeClass}" title="{removeTitle}" {dataUrl}{dataKey}>{removeIcon}</button>\n',t='<button type="button" class="kv-file-upload {uploadClass}" title="{uploadTitle}">{uploadIcon}</button>',u='<button type="button" class="kv-file-zoom {zoomClass}" title="{zoomTitle}">{zoomIcon}</button>',v='<span class="file-drag-handle {dragClass}" title="{dragTitle}">{dragIcon}</span>',w='<div class="file-upload-indicator" title="{indicatorTitle}">{indicator}</div>',x='<div class="file-preview-frame {frameClass}" id="{previewId}" data-fileindex="{fileindex}" data-template="{template}"',y=x+'><div class="kv-file-content">\n',z=x+' title="{caption}"><div class="kv-file-content">\n',A="</div>{footer}\n</div>\n",B="{content}\n",C='<div class="kv-preview-data file-preview-html" title="{caption}" '+b.STYLE_SETTING+">{data}</div>\n",D='<img src="{data}" class="file-preview-image kv-preview-data" title="{caption}" alt="{caption}" '+b.STYLE_SETTING+">\n",E='<textarea class="kv-preview-data file-preview-text" title="{caption}" readonly '+b.STYLE_SETTING+">{data}</textarea>\n",F='<video class="kv-preview-data file-preview-video" width="{width}" height="{height}" controls>\n<source src="{data}" type="{type}">\n'+b.DEFAULT_PREVIEW+"\n</video>\n",G='<div class="file-preview-audio"><audio class="kv-preview-data" controls>\n<source src="{data}" type="{type}">\n'+b.DEFAULT_PREVIEW+"\n</audio></div>\n",H='<object class="kv-preview-data file-object" type="application/x-shockwave-flash" width="{width}" height="{height}" data="{data}">\n'+b.OBJECT_PARAMS+" "+b.DEFAULT_PREVIEW+"\n</object>\n",I='<object class="kv-preview-data file-object {typeCss}" data="{data}" type="{type}" width="{width}" height="{height}">\n<param name="movie" value="{caption}" />\n'+b.OBJECT_PARAMS+" "+b.DEFAULT_PREVIEW+"\n</object>\n",J='<embed class="kv-preview-data" src="{data}" width="{width}" height="{height}" type="application/pdf">\n',K='<div class="kv-preview-data file-preview-other-frame">\n'+b.DEFAULT_PREVIEW+"\n</div>\n",L='<div class="kv-zoom-cache" style="display:none">{zoomContent}</div>',M={width:"100%",height:"100%","min-height":"480px"},c.defaults={layoutTemplates:{main1:d,main2:e,preview:f,close:h,fileIcon:g,caption:i,modalMain:m,modal:n,progress:o,size:p,footer:q,indicator:w,actions:r,actionDelete:s,actionUpload:t,actionZoom:u,actionDrag:v,btnDefault:j,btnLink:k,btnBrowse:l,zoomCache:L},previewMarkupTags:{tagBefore1:y,tagBefore2:z,tagAfter:A},previewContentTemplates:{generic:B,html:C,image:D,text:E,video:F,audio:G,flash:H,object:I,pdf:J,other:K},allowedPreviewTypes:["image","html","text","video","audio","flash","pdf","object"],previewTemplates:{},previewSettings:{image:{width:"auto",height:"160px"},html:{width:"213px",height:"160px"},text:{width:"213px",height:"160px"},video:{width:"auto",height:"100%","max-width":"100%"},audio:{width:"100%",height:"30px"},flash:{width:"auto",height:"100%","max-width":"100%"},object:{height:"100%"},pdf:{width:"160px",height:"160px"},other:{width:"160px",height:"160px"}},previewZoomSettings:{image:{width:"auto",height:"auto","max-width":"100%","max-height":"100%"},html:M,text:M,video:{width:"auto",height:"100%","max-width":"100%"},audio:{width:"100%",height:"30px"},flash:{width:"auto",height:"480px"},object:{width:"auto",height:"100%","max-width":"100%","min-height":"480px"},pdf:M,other:{width:"auto",height:"100%","min-height":"480px"}},fileTypeSettings:{image:function(a,c){return b.compare(a,"image.*")||b.compare(c,/\.(gif|png|jpe?g)$/i)},html:function(a,c){return b.compare(a,"text/html")||b.compare(c,/\.(htm|html)$/i)},text:function(a,c){return b.compare(a,"text.*")||b.compare(c,/\.(xml|javascript)$/i)||b.compare(c,/\.(txt|md|csv|nfo|ini|json|php|js|css)$/i)},video:function(a,c){return b.compare(a,"video.*")&&(b.compare(a,/(ogg|mp4|mp?g|mov|webm|3gp)$/i)||b.compare(c,/\.(og?|mp4|webm|mp?g|mov|3gp)$/i))},audio:function(a,c){return b.compare(a,"audio.*")&&(b.compare(c,/(ogg|mp3|mp?g|wav)$/i)||b.compare(c,/\.(og?|mp3|mp?g|wav)$/i))},flash:function(a,c){return b.compare(a,"application/x-shockwave-flash",!0)||b.compare(c,/\.(swf)$/i)},pdf:function(a,c){return b.compare(a,"application/pdf",!0)||b.compare(c,/\.(pdf)$/i)},object:function(){return!0},other:function(){return!0}},fileActionSettings:{showRemove:!0,showUpload:!0,showZoom:!0,showDrag:!0,removeIcon:'<i class="fa fa-trash text-danger"></i>',removeClass:"btn btn-xs btn-default",removeTitle:"Remove file",uploadIcon:'<i class="fa fa-upload text-info"></i>',uploadClass:"btn btn-xs btn-default",uploadTitle:"Upload file",zoomIcon:'<i class="fa fa-search-plus"></i>',zoomClass:"btn btn-xs btn-default",zoomTitle:"View Details",dragIcon:'<i class="fa fa-bars"></i>',dragClass:"text-info",dragTitle:"Move / Rearrange",dragSettings:{},indicatorNew:'<i class="fa fa-hand-o-down text-warning"></i>',indicatorSuccess:'<i class="fa fa-check-o text-success"></i>',indicatorError:'<i class="fa fa-exclamation-sign text-danger"></i>',indicatorLoading:'<i class="fa fa-hand-o-up text-muted"></i>',indicatorNewTitle:"Not uploaded yet",indicatorSuccessTitle:"Uploaded",indicatorErrorTitle:"Upload Error",indicatorLoadingTitle:"Uploading ..."}},a.each(c.defaults,function(b,d){if("allowedPreviewTypes"===b)return void(void 0===c.allowedPreviewTypes&&(c.allowedPreviewTypes=d));c[b]=a.extend(!0,{},d,c[b])}),c._initPreviewTemplates()},_initPreviewTemplates:function(){var f,c=this,d=c.defaults,e=c.previewMarkupTags,g=e.tagAfter;a.each(d.previewContentTemplates,function(a,d){b.isEmpty(c.previewTemplates[a])&&(f=e.tagBefore2,"generic"!==a&&"image"!==a&&"html"!==a&&"text"!==a||(f=e.tagBefore1),c.previewTemplates[a]=f+d+g)})},_initPreviewCache:function(){var c=this;c.previewCache={data:{},init:function(){var a=c.initialPreview;a.length>0&&!b.isArray(a)&&(a=a.split(c.initialPreviewDelimiter)),c.previewCache.data={content:a,config:c.initialPreviewConfig,tags:c.initialPreviewThumbTags}},fetch:function(){return c.previewCache.data.content.filter(function(a){return null!==a})},count:function(a){return c.previewCache.data&&c.previewCache.data.content?a?c.previewCache.data.content.length:c.previewCache.fetch().length:0},get:function(d,e){var k,l,m,n,o,p,q,f="init_"+d,g=c.previewCache.data,h=g.config[d],i=g.content[d],j=c.previewInitId+"-"+f,r=b.ifSet("previewAsData",h,c.initialPreviewAsData),s=function(a,d,e,f,g,h,i,j,k){return j=" file-preview-initial "+b.SORT_CSS+(j?" "+j:""),c._generatePreviewTemplate(a,d,e,f,g,!1,null,j,h,i,k)};return i?(e=void 0===e||e,m=b.ifSet("type",h,c.initialPreviewFileType||"generic"),o=b.ifSet("filename",h,b.ifSet("caption",h)),p=b.ifSet("filetype",h,m),n=c.previewCache.footer(d,e,h&&h.size||null),q=b.ifSet("frameClass",h),k=r?s(m,i,o,p,j,n,f,q):s("generic",i,o,p,j,n,f,q,m).setTokens({content:g.content[d]}),g.tags.length&&g.tags[d]&&(k=b.replaceTags(k,g.tags[d])),b.isEmpty(h)||b.isEmpty(h.frameAttr)||(l=a(document.createElement("div")).html(k),l.find(".file-preview-initial").attr(h.frameAttr),k=l.html(),l.remove()),k):""},add:function(a,d,e,f){var h,g=c.previewCache.data;return b.isArray(a)||(a=a.split(c.initialPreviewDelimiter)),f?(h=g.content.push(a)-1,g.config[h]=d,g.tags[h]=e):(h=a.length-1,g.content=a,g.config=d,g.tags=e),c.previewCache.data=g,h},set:function(a,d,e,f){var h,i,g=c.previewCache.data;if(a&&a.length&&(b.isArray(a)||(a=a.split(c.initialPreviewDelimiter)),i=a.filter(function(a){return null!==a}),i.length)){if(void 0===g.content&&(g.content=[]),void 0===g.config&&(g.config=[]),void 0===g.tags&&(g.tags=[]),f){for(h=0;h<a.length;h++)a[h]&&g.content.push(a[h]);for(h=0;h<d.length;h++)d[h]&&g.config.push(d[h]);for(h=0;h<e.length;h++)e[h]&&g.tags.push(e[h])}else g.content=a,g.config=d,g.tags=e;c.previewCache.data=g}},unset:function(a){var b=c.previewCache.count();if(b){if(1===b)return c.previewCache.data.content=[],c.previewCache.data.config=[],c.previewCache.data.tags=[],c.initialPreview=[],c.initialPreviewConfig=[],void(c.initialPreviewThumbTags=[]);c.previewCache.data.content[a]=null,c.previewCache.data.config[a]=null,c.previewCache.data.tags[a]=null}},out:function(){var b,e,a="",d=c.previewCache.count(!0);if(0===d)return{content:"",caption:""};for(e=0;e<d;e++)a+=c.previewCache.get(e);return b=c._getMsgSelected(c.previewCache.count()),{content:a,caption:b}},footer:function(a,d,e){var f=c.previewCache.data;if(!f||!f.config||0===f.config.length||b.isEmpty(f.config[a]))return"";d=void 0===d||d;var i,g=f.config[a],h=b.ifSet("caption",g),j=b.ifSet("width",g,"auto"),k=b.ifSet("url",g,!1),l=b.ifSet("key",g,null),m=c.fileActionSettings,n=c.initialPreviewShowDelete||!1,o=b.ifSet("showDelete",g,b.ifSet("showDelete",m,n)),p=b.ifSet("showZoom",g,b.ifSet("showZoom",m,!0)),q=b.ifSet("showDrag",g,b.ifSet("showDrag",m,!0)),r=!1===k&&d;return i=c._renderFileActions(!1,o,p,q,r,k,l,!0),c._getLayoutTemplate("footer").setTokens({progress:c._renderThumbProgress(),actions:i,caption:h,size:c._getSize(e),width:j,indicator:""})}},c.previewCache.init()},_handler:function(a,b,c){var d=this,e=d.namespace,f=b.split(" ").join(e+" ")+e;a&&a.length&&a.off(f).on(f,c)},_log:function(a){var b=this,c=b.$element.attr("id");c&&(a='"'+c+'": '+a),void 0!==window.console.log?window.console.log(a):window.alert(a)},_validate:function(){var a=this,b="file"===a.$element.attr("type");return b||a._log('The input "type" must be set to "file" for initializing the "bootstrap-fileinput" plugin.'),b},_errorsExist:function(){var c,b=this;return!!b.$errorContainer.find("li").length||(c=a(document.createElement("div")).html(b.$errorContainer.html()),c.find("span.kv-error-close").remove(),c.find("ul").remove(),!!a.trim(c.text()).length)},_errorHandler:function(a,b){var c=this,d=a.target.error,e=function(a){c._showError(a.replace("{name}",b))};e(d.code===d.NOT_FOUND_ERR?c.msgFileNotFound:d.code===d.SECURITY_ERR?c.msgFileSecured:d.code===d.NOT_READABLE_ERR?c.msgFileNotReadable:d.code===d.ABORT_ERR?c.msgFilePreviewAborted:c.msgFilePreviewError)},_addError:function(a){var b=this,c=b.$errorContainer;a&&c.length&&(c.html(b.errorCloseButton+a),b._handler(c.find(".kv-error-close"),"click",function(){c.fadeOut("slow")}))},_resetErrors:function(a){var b=this,c=b.$errorContainer;b.isError=!1,b.$container.removeClass("has-error"),c.html(""),a?c.fadeOut("slow"):c.hide()},_showFolderError:function(a){var e,c=this,d=c.$errorContainer;a&&(e=c.msgFoldersNotAllowed.replace("{n}",a),c._addError(e),b.addCss(c.$container,"has-error"),d.fadeIn(800),c._raise("filefoldererror",[a,e]))},_showUploadError:function(a,c,d){var e=this,f=e.$errorContainer,g=d||"fileuploaderror",h=c&&c.id?'<li data-file-id="'+c.id+'">'+a+"</li>":"<li>"+a+"</li>";return 0===f.find("ul").length?e._addError("<ul>"+h+"</ul>"):f.find("ul").append(h),f.fadeIn(800),e._raise(g,[c,a]),e.$container.removeClass("file-input-new"),b.addCss(e.$container,"has-error"),!0},_showError:function(a,c,d){var e=this,f=e.$errorContainer,g=d||"fileerror";return c=c||{},c.reader=e.reader,e._addError(a),f.fadeIn(800),e._raise(g,[c,a]),e.isUploadable||e._clearFileInput(),e.$container.removeClass("file-input-new"),b.addCss(e.$container,"has-error"),e.$btnUpload.attr("disabled",!0),!0},_noFilesError:function(a){var c=this,d=c.minFileCount>1?c.filePlural:c.fileSingle,e=c.msgFilesTooLess.replace("{n}",c.minFileCount).replace("{files}",d),f=c.$errorContainer;c._addError(e),c.isError=!0,c._updateFileDetails(0),f.fadeIn(800),c._raise("fileerror",[a,e]),c._clearFileInput(),b.addCss(c.$container,"has-error")},_parseError:function(b,c,d,e){var f=this,g=a.trim(d+""),h="."===g.slice(-1)?"":".",i=void 0!==c.responseJSON&&void 0!==c.responseJSON.error?c.responseJSON.error:c.responseText;return f.cancelling&&f.msgUploadAborted&&(g=f.msgUploadAborted),f.showAjaxErrorDetails&&i?(i=a.trim(i.replace(/\n\s*\n/g,"\n")),i=i.length>0?"<pre>"+i+"</pre>":"",g+=h+i):g+=h,g===h&&(g=f.msgAjaxError.replace("{operation}",b)),f.cancelling=!1,e?"<b>"+e+": </b>"+g:g},_parseFileType:function(a){var d,e,f,g,c=this,h=c.allowedPreviewTypes||[];for(g=0;g<h.length;g++)if(f=h[g],d=c.fileTypeSettings[f],e=d(a.type,a.name)?f:"",!b.isEmpty(e))return e;return"other"},_getPreviewIcon:function(b){var d,c=this,e=null;return b&&b.indexOf(".")>-1&&(d=b.split(".").pop(),c.previewFileIconSettings&&(e=c.previewFileIconSettings[d]||c.previewFileIconSettings[d.toLowerCase()]||null),c.previewFileExtSettings&&a.each(c.previewFileExtSettings,function(a,b){if(c.previewFileIconSettings[a]&&b(d))return void(e=c.previewFileIconSettings[a])})),e},_parseFilePreviewIcon:function(a,b){var c=this,d=c._getPreviewIcon(b)||c.previewFileIcon,e=a;return e.indexOf("{previewFileIcon}")>-1&&(e=e.setTokens({previewFileIconClass:c.previewFileIconClass,previewFileIcon:d})),e},_raise:function(b,c){var d=this,e=a.Event(b);if(void 0!==c?d.$element.trigger(e,c):d.$element.trigger(e),e.isDefaultPrevented()||!1===e.result)return!1;switch(b){case"filebatchuploadcomplete":case"filebatchuploadsuccess":case"fileuploaded":case"fileclear":case"filecleared":case"filereset":case"fileerror":case"filefoldererror":case"fileuploaderror":case"filebatchuploaderror":case"filedeleteerror":case"filecustomerror":case"filesuccessremove":break;default:d.ajaxAborted||(d.ajaxAborted=e.result)}return!0},_listenFullScreen:function(a){var d,e,b=this,c=b.$modal;c&&c.length&&(d=c&&c.find(".btn-fullscreen"),e=c&&c.find(".btn-borderless"),d.length&&e.length&&(d.removeClass("active").attr("aria-pressed","false"),e.removeClass("active").attr("aria-pressed","false"),a?d.addClass("active").attr("aria-pressed","true"):e.addClass("active").attr("aria-pressed","true"),c.hasClass("file-zoom-fullscreen")?b._maximizeZoomDialog():a?b._maximizeZoomDialog():e.removeClass("active").attr("aria-pressed","false")))},_listen:function(){var g,c=this,d=c.$element,e=c.$form,f=c.$container;c._handler(d,"change",a.proxy(c._change,c)),c.showBrowse&&c._handler(c.$btnFile,"click",a.proxy(c._browse,c)),c._handler(f.find(".fileinput-remove:not([disabled])"),"click",a.proxy(c.clear,c)),c._handler(f.find(".fileinput-cancel"),"click",a.proxy(c.cancel,c)),c._initDragDrop(),c._handler(e,"reset",a.proxy(c.reset,c)),c.isUploadable||c._handler(e,"submit",a.proxy(c._submitForm,c)),c._handler(c.$container.find(".fileinput-upload"),"click",a.proxy(c._uploadClick,c)),c._handler(a(window),"resize",function(){c._listenFullScreen(screen.width===window.innerWidth&&screen.height===window.innerHeight)}),g="webkitfullscreenchange mozfullscreenchange fullscreenchange MSFullscreenChange",c._handler(a(document),g,function(){c._listenFullScreen(b.checkFullScreen())}),c._initClickable()},_initClickable:function(){var d,c=this;c.isClickable&&(d=c.isUploadable?c.$dropZone:c.$preview.find(".file-default-preview"),b.addCss(d,"clickable"),d.attr("tabindex",-1),c._handler(d,"click",function(b){var e=a(b.target);e.parents(".file-preview-thumbnails").length&&!e.parents(".file-default-preview").length||(c.$element.trigger("click"),d.blur())}))},_initDragDrop:function(){var b=this,c=b.$dropZone;b.isUploadable&&b.dropZoneEnabled&&b.showPreview&&(b._handler(c,"dragenter dragover",a.proxy(b._zoneDragEnter,b)),b._handler(c,"dragleave",a.proxy(b._zoneDragLeave,b)),b._handler(c,"drop",a.proxy(b._zoneDrop,b)),b._handler(a(document),"dragenter dragover drop",b._zoneDragDropInit))},_zoneDragDropInit:function(a){a.stopPropagation(),a.preventDefault()},_zoneDragEnter:function(c){var d=this,e=a.inArray("Files",c.originalEvent.dataTransfer.types)>-1;if(d._zoneDragDropInit(c),d.isDisabled||!e)return c.originalEvent.dataTransfer.effectAllowed="none",void(c.originalEvent.dataTransfer.dropEffect="none");b.addCss(d.$dropZone,"file-highlighted")},_zoneDragLeave:function(a){var b=this;b._zoneDragDropInit(a),b.isDisabled||b.$dropZone.removeClass("file-highlighted")},_zoneDrop:function(a){var c=this;a.preventDefault(),c.isDisabled||b.isEmpty(a.originalEvent.dataTransfer.files)||(c._change(a,"dragdrop"),c.$dropZone.removeClass("file-highlighted"))},_uploadClick:function(a){var e,c=this,d=c.$container.find(".fileinput-upload"),f=!d.hasClass("disabled")&&b.isEmpty(d.attr("disabled"));if(!a||!a.isDefaultPrevented()){if(!c.isUploadable)return void(f&&"submit"!==d.attr("type")&&(e=d.closest("form"),e.length&&e.trigger("submit"),a.preventDefault()));a.preventDefault(),f&&c.upload()}},_submitForm:function(){var a=this;return a._isFileSelectionValid()&&!a._abort({})},_clearPreview:function(){var c=this,d=c.$preview;(c.showUploadedThumbs?d.find(b.FRAMES+":not(.file-preview-success)"):d.find(b.FRAMES)).each(function(){var c=a(this);c.remove(),b.cleanZoomCache(d.find("#zoom-"+c.attr("id")))}),c.$preview.find(b.FRAMES).length&&c.showPreview||c._resetUpload(),c._validateDefaultPreview()},_initSortable:function(){var e,c=this,d=c.$preview,f="."+b.SORT_CSS;window.KvSortable&&0!==d.find(f).length&&(e={handle:".drag-handle-init",dataIdAttr:"data-preview-id",scroll:!1,draggable:f,onSort:function(d){var g,h,e=d.oldIndex,f=d.newIndex;c.initialPreview=b.moveArray(c.initialPreview,e,f),c.initialPreviewConfig=b.moveArray(c.initialPreviewConfig,e,f),c.previewCache.init();for(var i=0;i<c.initialPreviewConfig.length;i++)null!==c.initialPreviewConfig[i]&&(g=c.initialPreviewConfig[i].key,h=a(".kv-file-remove[data-key='"+g+"']").closest(b.FRAMES),h.attr("data-fileindex","init_"+i).attr("data-fileindex","init_"+i));c._raise("filesorted",{previewId:a(d.item).attr("id"),oldIndex:e,newIndex:f,stack:c.initialPreviewConfig})}},d.data("kvsortable")&&d.kvsortable("destroy"),a.extend(!0,e,c.fileActionSettings.dragSettings),d.kvsortable(e))},_initPreview:function(a){var e,c=this,d=c.initialCaption||"";if(!c.previewCache.count())return c._clearPreview(),void(a?c._setCaption(d):c._initCaption());e=c.previewCache.out(),d=a&&c.initialCaption?c.initialCaption:e.caption,c.$preview.html(e.content),c._setInitThumbAttr(),c._setCaption(d),c._initSortable(),b.isEmpty(e.content)||c.$container.removeClass("file-input-new")},_getZoomButton:function(a){var b=this,c=b.previewZoomButtonIcons[a],d=b.previewZoomButtonClasses[a],e=' title="'+(b.previewZoomButtonTitles[a]||"")+'" ',f=e+("close"===a?' data-dismiss="modal" aria-hidden="true"':"");return"fullscreen"!==a&&"borderless"!==a&&"toggleheader"!==a||(f+=' data-toggle="button" aria-pressed="false" autocomplete="off"'),'<button type="button" class="'+d+" btn-"+a+'"'+f+">"+c+"</button>"},_getModalContent:function(){var a=this;return a._getLayoutTemplate("modal").setTokens({zoomFrameClass:a.frameClass,heading:a.msgZoomModalHeading,prev:a._getZoomButton("prev"),next:a._getZoomButton("next"),toggleheader:a._getZoomButton("toggleheader"),fullscreen:a._getZoomButton("fullscreen"),borderless:a._getZoomButton("borderless"),close:a._getZoomButton("close")})},_listenModalEvent:function(a){var c=this,d=c.$modal,e=function(a){return{sourceEvent:a,previewId:d.data("previewId"),modal:d}};d.on(a+".bs.modal",function(f){var g=d.find(".btn-fullscreen"),h=d.find(".btn-borderless");c._raise("filezoom"+a,e(f)),"shown"===a&&(h.removeClass("active").attr("aria-pressed","false"),g.removeClass("active").attr("aria-pressed","false"),d.hasClass("file-zoom-fullscreen")&&(c._maximizeZoomDialog(),b.checkFullScreen()?g.addClass("active").attr("aria-pressed","true"):h.addClass("active").attr("aria-pressed","true")))})},_initZoom:function(){var d,c=this,e=c._getLayoutTemplate("modalMain"),f="#"+b.MODAL_ID;c.showPreview&&(c.$modal=a(f),c.$modal&&c.$modal.length||(d=a(document.createElement("div")).html(e).insertAfter(c.$container),c.$modal=a(f).insertBefore(d),d.remove()),b.initModal(c.$modal),c.$modal.html(c._getModalContent()),a.each(b.MODAL_EVENTS,function(a,b){c._listenModalEvent(b)}))},_initZoomButtons:function(){var e,f,c=this,d=c.$modal.data("previewId")||"",g=c.$preview,h=g.find(b.FRAMES).toArray(),i=h.length,j=c.$modal.find(".btn-prev"),k=c.$modal.find(".btn-next");if(h.length<2)return j.hide(),void k.hide();j.show(),k.show(),i&&(e=a(h[0]),f=a(h[i-1]),j.removeAttr("disabled"),k.removeAttr("disabled"),e.length&&e.attr("id")===d&&j.attr("disabled",!0),f.length&&f.attr("id")===d&&k.attr("disabled",!0))},_maximizeZoomDialog:function(){var b=this,c=b.$modal,d=c.find(".modal-header:visible"),e=c.find(".modal-footer:visible"),f=c.find(".modal-body"),g=a(window).height(),h=0;c.addClass("file-zoom-fullscreen"),d&&d.length&&(g-=d.outerHeight(!0)),e&&e.length&&(g-=e.outerHeight(!0)),f&&f.length&&(h=f.outerHeight(!0)-f.height(),g-=h),c.find(".kv-zoom-body").height(g)},_resizeZoomDialog:function(a){var c=this,d=c.$modal,e=d.find(".btn-fullscreen"),f=d.find(".btn-borderless");if(d.hasClass("file-zoom-fullscreen"))b.toggleFullScreen(!1),a?e.hasClass("active")||(d.removeClass("file-zoom-fullscreen"),c._resizeZoomDialog(!0),f.hasClass("active")&&f.removeClass("active").attr("aria-pressed","false")):e.hasClass("active")?e.removeClass("active").attr("aria-pressed","false"):(d.removeClass("file-zoom-fullscreen"),c.$modal.find(".kv-zoom-body").css("height",c.zoomModalHeight));else{if(!a)return void c._maximizeZoomDialog();b.toggleFullScreen(!0)}d.focus()},_setZoomContent:function(c,d){var f,g,h,i,j,k,l,q,t,u,e=this,m=c.attr("id"),n=e.$modal,o=n.find(".btn-prev"),p=n.find(".btn-next"),r=n.find(".btn-fullscreen"),s=n.find(".btn-borderless"),v=n.find(".btn-toggleheader"),w=e.$preview.find("#zoom-"+m);g=w.attr("data-template")||"generic",f=w.find(".kv-file-content"),h=f.length?f.html():"",t=c.data("caption")||"",u=c.data("size")||"",i=t+" "+u,n.find(".kv-zoom-title").html(i),j=n.find(".kv-zoom-body"),n.removeClass("kv-single-content"),d?(q=j.addClass("file-thumb-loading").clone().insertAfter(j),j.html(h).hide(),q.fadeOut("fast",function(){j.fadeIn("fast",function(){j.removeClass("file-thumb-loading")}),q.remove()})):j.html(h),l=e.previewZoomSettings[g],l&&(k=j.find(".kv-preview-data"),b.addCss(k,"file-zoom-detail"),a.each(l,function(a,b){k.css(a,b),(k.attr("width")&&"width"===a||k.attr("height")&&"height"===a)&&k.removeAttr(a)})),n.data("previewId",m);var x=j.find("img");x.length&&b.adjustOrientedImage(x,!0),e._handler(o,"click",function(){e._zoomSlideShow("prev",m)}),e._handler(p,"click",function(){e._zoomSlideShow("next",m)}),e._handler(r,"click",function(){e._resizeZoomDialog(!0)}),e._handler(s,"click",function(){e._resizeZoomDialog(!1)}),e._handler(v,"click",function(){var c,a=n.find(".modal-header"),b=n.find(".modal-body .floating-buttons"),d=a.find(".kv-zoom-actions"),f=function(b){var c=e.$modal.find(".kv-zoom-body"),d=e.zoomModalHeight;n.hasClass("file-zoom-fullscreen")&&(d=c.outerHeight(!0),b||(d-=a.outerHeight(!0))),c.css("height",b?d+b:d)};a.is(":visible")?(c=a.outerHeight(!0),a.slideUp("slow",function(){d.find(".btn").appendTo(b),f(c)})):(b.find(".btn").appendTo(d),a.slideDown("slow",function(){f()})),n.focus()}),e._handler(n,"keydown",function(a){var b=a.which||a.keyCode;37!==b||o.attr("disabled")||e._zoomSlideShow("prev",m),39!==b||p.attr("disabled")||e._zoomSlideShow("next",m)})},_zoomPreview:function(a){var d,c=this,e=c.$modal;if(!a.length)throw"Cannot zoom to detailed preview!";b.initModal(e),e.html(c._getModalContent()),d=a.closest(b.FRAMES),c._setZoomContent(d),e.modal("show"),c._initZoomButtons()},_zoomSlideShow:function(c,d){var g,h,k,e=this,f=e.$modal.find(".kv-zoom-actions .btn-"+c),i=e.$preview.find(b.FRAMES).toArray(),j=i.length;if(!f.attr("disabled")){for(h=0;h<j;h++)if(a(i[h]).attr("id")===d){k="prev"===c?h-1:h+1;break}k<0||k>=j||!i[k]||(g=a(i[k]),g.length&&e._setZoomContent(g,!0),e._initZoomButtons(),e._raise("filezoom"+c,{previewId:d,modal:e.$modal}))}},_initZoomButton:function(){var b=this;b.$preview.find(".kv-file-zoom").each(function(){var c=a(this);b._handler(c,"click",function(){b._zoomPreview(c)})})},_clearObjects:function(b){b.find("video audio").each(function(){this.pause(),a(this).remove()}),b.find("img object div").each(function(){a(this).remove()})},_clearFileInput:function(){var e,f,g,c=this,d=c.$element;c.fileInputCleared=!0,b.isEmpty(d.val())||(c.isIE9||c.isIE10?(e=d.closest("form"),f=a(document.createElement("form")),g=a(document.createElement("div")),d.before(g),e.length?e.after(f):g.after(f),f.append(d).trigger("reset"),g.before(d).remove(),f.remove()):d.val(""))},_resetUpload:function(){var a=this;a.uploadCache={content:[],config:[],tags:[],append:!0},a.uploadCount=0,a.uploadStatus={},a.uploadLog=[],a.uploadAsyncCount=0,a.loadedImages=[],a.totalImagesCount=0,a.$btnUpload.removeAttr("disabled"),a._setProgress(0),b.addCss(a.$progress,"hide"),a._resetErrors(!1),a.ajaxAborted=!1,a.ajaxRequests=[],a._resetCanvas(),a.cacheInitialPreview={},a.overwriteInitial&&(a.initialPreview=[],a.initialPreviewConfig=[],a.initialPreviewThumbTags=[],a.previewCache.data={content:[],config:[],tags:[]})},_resetCanvas:function(){var a=this;a.canvas&&a.imageCanvasContext&&a.imageCanvasContext.clearRect(0,0,a.canvas.width,a.canvas.height)},_hasInitialPreview:function(){var a=this;return!a.overwriteInitial&&a.previewCache.count()},_resetPreview:function(){var b,c,a=this;a.previewCache.count()?(b=a.previewCache.out(),a.$preview.html(b.content),a._setInitThumbAttr(),c=a.initialCaption?a.initialCaption:b.caption,a._setCaption(c)):(a._clearPreview(),a._initCaption()),a.showPreview&&(a._initZoom(),a._initSortable())},_clearDefaultPreview:function(){this.$preview.find(".file-default-preview").remove()},_validateDefaultPreview:function(){var a=this;a.showPreview&&!b.isEmpty(a.defaultPreviewContent)&&(a.$preview.html('<div class="file-default-preview">'+a.defaultPreviewContent+"</div>"),a.$container.removeClass("file-input-new"),a._initClickable())},_resetPreviewThumbs:function(a){var c,b=this;if(a)return b._clearPreview(),void b.clearStack();b._hasInitialPreview()?(c=b.previewCache.out(),b.$preview.html(c.content),b._setInitThumbAttr(),b._setCaption(c.caption),b._initPreviewActions()):b._clearPreview()},_getLayoutTemplate:function(a){var c=this,d=c.layoutTemplates[a];return b.isEmpty(c.customLayoutTags)?d:b.replaceTags(d,c.customLayoutTags)},_getPreviewTemplate:function(a){var c=this,d=c.previewTemplates[a];return b.isEmpty(c.customPreviewTags)?d:b.replaceTags(d,c.customPreviewTags)},_getOutData:function(a,b,c){var d=this;return a=a||{},b=b||{},c=c||d.filestack.slice(0)||{},{form:d.formdata,files:c,filenames:d.filenames,filescount:d.getFilesCount(),extra:d._getExtraData(),response:b,reader:d.reader,jqXHR:a}},_getMsgSelected:function(a){var b=this,c=1===a?b.fileSingle:b.filePlural;return a>0?b.msgSelected.replace("{n}",a).replace("{files}",c):b.msgNoFilesSelected},_getThumbs:function(a){return a=a||"",this.$preview.find(b.FRAMES+":not(.file-preview-initial)"+a)},_getExtraData:function(a,b){var c=this,d=c.uploadExtraData;return"function"==typeof c.uploadExtraData&&(d=c.uploadExtraData(a,b)),d},_initXhr:function(a,b,c){var d=this;return a.upload&&a.upload.addEventListener("progress",function(a){var e=0,f=a.total,g=a.loaded||a.position;a.lengthComputable&&(e=Math.floor(g/f*100)),b?d._setAsyncUploadStatus(b,e,c):d._setProgress(e)},!1),a},_ajaxSubmit:function(b,c,d,e,f,g){var i,h=this;h._raise("filepreajax",[f,g])&&(h._uploadExtra(f,g),i=a.extend(!0,{},{xhr:function(){var b=a.ajaxSettings.xhr();return h._initXhr(b,f,h.getFileStack().length)},url:h.uploadUrl,type:"POST",dataType:"json",data:h.formdata,cache:!1,processData:!1,contentType:!1,beforeSend:b,success:c,complete:d,error:e},h.ajaxSettings),h.ajaxRequests.push(a.ajax(i)))},_mergeArray:function(a,c){var d=this,e=b.cleanArray(d[a]),f=b.cleanArray(c);d[a]=e.concat(f)},_initUploadSuccess:function(c,d,e){var g,h,i,j,k,l,m,n,o,f=this;f.showPreview&&"object"==typeof c&&!a.isEmptyObject(c)&&void 0!==c.initialPreview&&c.initialPreview.length>0&&(f.hasInitData=!0,l=c.initialPreview||[],m=c.initialPreviewConfig||[],n=c.initialPreviewThumbTags||[],g=!(void 0!==c.append&&!c.append),l.length>0&&!b.isArray(l)&&(l=l.split(f.initialPreviewDelimiter)),f._mergeArray("initialPreview",l),f._mergeArray("initialPreviewConfig",m),f._mergeArray("initialPreviewThumbTags",n),void 0!==d?e?(o=d.attr("data-fileindex"),f.uploadCache.content[o]=l[0],f.uploadCache.config[o]=m[0]||[],f.uploadCache.tags[o]=n[0]||[],f.uploadCache.append=g):(i=f.previewCache.add(l,m[0],n[0],g),h=f.previewCache.get(i,!1),j=a(document.createElement("div")).html(h).hide().insertAfter(d),k=j.find(".kv-zoom-cache"),k&&k.length&&k.insertAfter(d),d.fadeOut("slow",function(){var a=j.find(".file-preview-frame");a&&a.length&&a.insertBefore(d).fadeIn("slow").css("display:inline-block"),f._initPreviewActions(),f._clearFileInput(),b.cleanZoomCache(f.$preview.find("#zoom-"+d.attr("id"))),d.remove(),j.remove(),f._initSortable()})):(f.previewCache.set(l,m,n,g),f._initPreview(),f._initPreviewActions()))},_initSuccessThumbs:function(){var c=this;c.showPreview&&c._getThumbs(b.FRAMES+".file-preview-success").each(function(){var d=a(this),e=c.$preview,f=d.find(".kv-file-remove");f.removeAttr("disabled"),c._handler(f,"click",function(){var a=d.attr("id"),f=c._raise("filesuccessremove",[a,d.attr("data-fileindex")]);b.cleanMemory(d),!1!==f&&d.fadeOut("slow",function(){b.cleanZoomCache(e.find("#zoom-"+a)),d.remove(),e.find(b.FRAMES).length||c.reset()})})})},_checkAsyncComplete:function(){var c,d,b=this;for(d=0;d<b.filestack.length;d++)if(b.filestack[d]&&(c=b.previewInitId+"-"+d,-1===a.inArray(c,b.uploadLog)))return!1;return b.uploadAsyncCount===b.uploadLog.length},_uploadExtra:function(b,c){var d=this,e=d._getExtraData(b,c);0!==e.length&&a.each(e,function(a,b){d.formdata.append(a,b)})},_uploadSingle:function(c,d,e){var i,k,l,m,n,q,r,s,t,u,f=this,g=f.getFileStack().length,h=new FormData,j=f.previewInitId+"-"+c,o=f.filestack.length>0||!a.isEmptyObject(f.uploadExtraData),p=a("#"+j).find(".file-thumb-progress"),v={id:j,index:c};f.formdata=h,f.showPreview&&(k=a("#"+j+":not(.file-preview-initial)"),m=k.find(".kv-file-upload"),n=k.find(".kv-file-remove"),p.removeClass("hide")),0===g||!o||m&&m.hasClass("disabled")||f._abort(v)||(u=function(a,b){f.updateStack(a,void 0),f.uploadLog.push(b),f._checkAsyncComplete()&&(f.fileBatchCompleted=!0)},l=function(){var c,d,e,a=f.uploadCache,g=0,h=f.cacheInitialPreview;f.fileBatchCompleted&&(h&&h.content&&(g=h.content.length),setTimeout(function(){if(f.showPreview){if(f.previewCache.set(a.content,a.config,a.tags,a.append),g){for(d=0;d<a.content.length;d++)e=d+g,h.content[e]=a.content[d],h.config.length&&(h.config[e]=a.config[d]),h.tags.length&&(h.tags[e]=a.tags[d]);f.initialPreview=b.cleanArray(h.content),f.initialPreviewConfig=b.cleanArray(h.config),f.initialPreviewThumbTags=b.cleanArray(h.tags)}else f.initialPreview=a.content,f.initialPreviewConfig=a.config,f.initialPreviewThumbTags=a.tags;f.cacheInitialPreview={},f.hasInitData&&(f._initPreview(),f._initPreviewActions())}f.unlock(),f._clearFileInput(),c=f.$preview.find(".file-preview-initial"),f.uploadAsync&&c.length&&(b.addCss(c,b.SORT_CSS),f._initSortable()),f._raise("filebatchuploadcomplete",[f.filestack,f._getExtraData()]),f.uploadCount=0,f.uploadStatus={},f.uploadLog=[],f._setProgress(101)},100))},q=function(d){i=f._getOutData(d),f.fileBatchCompleted=!1,f.showPreview&&(k.hasClass("file-preview-success")||(f._setThumbStatus(k,"Loading"),b.addCss(k,"file-uploading")),m.attr("disabled",!0),n.attr("disabled",!0)),e||f.lock(),f._raise("filepreupload",[i,j,c]),a.extend(!0,v,i),f._abort(v)&&(d.abort(),f._setProgressCancelled())},r=function(d,g,h){var l=f.showPreview&&k.attr("id")?k.attr("id"):j;i=f._getOutData(h,d),a.extend(!0,v,i),setTimeout(function(){b.isEmpty(d)||b.isEmpty(d.error)?(f.showPreview&&(f._setThumbStatus(k,"Success"),m.hide(),f._initUploadSuccess(d,k,e),f._setProgress(101,p)),f._raise("fileuploaded",[i,l,c]),e?u(c,l):f.updateStack(c,void 0)):(f._showUploadError(d.error,v),f._setPreviewError(k,c),e&&u(c,l))},100)},s=function(){setTimeout(function(){f.showPreview&&(m.removeAttr("disabled"),n.removeAttr("disabled"),k.removeClass("file-uploading")),e?l():(f.unlock(!1),f._clearFileInput()),f._initSuccessThumbs()},100)},t=function(b,g,h){var i=f.ajaxOperations.uploadThumb,l=f._parseError(i,b,h,e?d[c].name:null);setTimeout(function(){e&&u(c,j),f.uploadStatus[j]=100,f._setPreviewError(k,c),a.extend(!0,v,f._getOutData(b)),f._setProgress(101,p,f.msgAjaxProgressError.replace("{operation}",i)),f._showUploadError(l,v)},100)},h.append(f.uploadFileAttr,d[c],f.filenames[c]),h.append("file_id",c),f._ajaxSubmit(q,r,s,t,j,c))},_uploadBatch:function(){var g,h,i,j,l,c=this,d=c.filestack,e=d.length,f={},k=c.filestack.length>0||!a.isEmptyObject(c.uploadExtraData);c.formdata=new FormData,0!==e&&k&&!c._abort(f)&&(l=function(){a.each(d,function(a){c.updateStack(a,void 0)}),c._clearFileInput()},g=function(d){c.lock();var e=c._getOutData(d);c.showPreview&&c._getThumbs().each(function(){var d=a(this),e=d.find(".kv-file-upload"),f=d.find(".kv-file-remove");d.hasClass("file-preview-success")||(c._setThumbStatus(d,"Loading"),b.addCss(d,"file-uploading")),e.attr("disabled",!0),f.attr("disabled",!0)}),c._raise("filebatchpreupload",[e]),c._abort(e)&&(d.abort(),c._setProgressCancelled())},h=function(d,e,f){var g=c._getOutData(f,d),h=c._getThumbs(":not(.file-preview-error)"),i=0,j=b.isEmpty(d)||b.isEmpty(d.errorkeys)?[]:d.errorkeys;b.isEmpty(d)||b.isEmpty(d.error)?(c._raise("filebatchuploadsuccess",[g]),l(),c.showPreview?(h.each(function(){var b=a(this),d=b.find(".kv-file-upload");b.find(".kv-file-upload").hide(),c._setThumbStatus(b,"Success"),b.removeClass("file-uploading"),d.removeAttr("disabled")}),c._initUploadSuccess(d)):c.reset(),c._setProgress(101)):(c.showPreview&&(h.each(function(){var b=a(this),d=b.find(".kv-file-remove"),e=b.find(".kv-file-upload");if(b.removeClass("file-uploading"),e.removeAttr("disabled"),d.removeAttr("disabled"),0===j.length)return void c._setPreviewError(b);-1!==a.inArray(i,j)?c._setPreviewError(b):(b.find(".kv-file-upload").hide(),c._setThumbStatus(b,"Success"),c.updateStack(i,void 0)),i++}),c._initUploadSuccess(d)),c._showUploadError(d.error,g,"filebatchuploaderror"))},j=function(){c.unlock(),c._initSuccessThumbs(),c._clearFileInput(),c._raise("filebatchuploadcomplete",[c.filestack,c._getExtraData()])},i=function(b,d,f){var g=c._getOutData(b),h=c.ajaxOperations.uploadBatch,i=c._parseError(h,b,f);c._showUploadError(i,g,"filebatchuploaderror"),c.uploadFileCount=e-1,c.showPreview&&(c._getThumbs().each(function(){var b=a(this),d=b.attr("data-fileindex");b.removeClass("file-uploading"),void 0!==c.filestack[d]&&c._setPreviewError(b)}),c._getThumbs().removeClass("file-uploading"),c._getThumbs(" .kv-file-upload").removeAttr("disabled"),c._getThumbs(" .kv-file-delete").removeAttr("disabled"),c._setProgress(101,c.$progress,c.msgAjaxProgressError.replace("{operation}",h)))},a.each(d,function(a,e){b.isEmpty(d[a])||c.formdata.append(c.uploadFileAttr,e,c.filenames[a])}),c._ajaxSubmit(g,h,j,i))},_uploadExtraOnly:function(){var d,e,f,g,a=this,c={};a.formdata=new FormData,a._abort(c)||(d=function(b){a.lock();var d=a._getOutData(b);a._raise("filebatchpreupload",[d]),a._setProgress(50),c.data=d,c.xhr=b,a._abort(c)&&(b.abort(),a._setProgressCancelled())},e=function(c,d,e){var f=a._getOutData(e,c);b.isEmpty(c)||b.isEmpty(c.error)?(a._raise("filebatchuploadsuccess",[f]),a._clearFileInput(),a._initUploadSuccess(c),a._setProgress(101)):a._showUploadError(c.error,f,"filebatchuploaderror")},f=function(){a.unlock(),a._clearFileInput(),a._raise("filebatchuploadcomplete",[a.filestack,a._getExtraData()])},g=function(b,d,e){var f=a._getOutData(b),g=a.ajaxOperations.uploadExtra,h=a._parseError(g,b,e);c.data=f,a._showUploadError(h,f,"filebatchuploaderror"),a._setProgress(101,a.$progress,a.msgAjaxProgressError.replace("{operation}",g))},a._ajaxSubmit(d,e,f,g))},_deleteFileIndex:function(c){var d=this,e=c.attr("data-fileindex");"init_"===e.substring(0,5)&&(e=parseInt(e.replace("init_","")),d.initialPreview=b.spliceArray(d.initialPreview,e),d.initialPreviewConfig=b.spliceArray(d.initialPreviewConfig,e),d.initialPreviewThumbTags=b.spliceArray(d.initialPreviewThumbTags,e),d.$preview.find(b.FRAMES).each(function(){var b=a(this),c=b.attr("data-fileindex");"init_"===c.substring(0,5)&&(c=parseInt(c.replace("init_","")))>e&&(c--,b.attr("data-fileindex","init_"+c))}),d.uploadAsync&&(d.cacheInitialPreview=d.getPreview()))},_initFileActions:function(){var c=this,d=c.$preview;c.showPreview&&(c._initZoomButton(),d.find(b.FRAMES+" .kv-file-remove").each(function(){var g,j,k,l,e=a(this),f=e.closest(b.FRAMES),h=f.attr("id"),i=f.attr("data-fileindex");c._handler(e,"click",function(){if(!1===(l=c._raise("filepreremove",[h,i]))||!c._validateMinCount())return!1;g=f.hasClass("file-preview-error"),b.cleanMemory(f),f.fadeOut("slow",function(){b.cleanZoomCache(d.find("#zoom-"+h)),c.updateStack(i,void 0),c._clearObjects(f),f.remove(),h&&g&&c.$errorContainer.find('li[data-file-id="'+h+'"]').fadeOut("fast",function(){a(this).remove(),c._errorsExist()||c._resetErrors()}),c._clearFileInput();var e=c.getFileStack(!0),l=c.previewCache.count(),m=e.length,n=c.showPreview&&d.find(b.FRAMES).length;0!==m||0!==l||n?(j=l+m,k=j>1?c._getMsgSelected(j):e[0]?c._getFileNames()[0]:"",c._setCaption(k)):c.reset(),c._raise("fileremoved",[h,i])})})}),c.$preview.find(b.FRAMES+" .kv-file-upload").each(function(){var d=a(this);c._handler(d,"click",function(){var a=d.closest(b.FRAMES),e=a.attr("data-fileindex");a.hasClass("file-preview-error")||c._uploadSingle(e,c.filestack,!1)})}))},_initPreviewActions:function(){var c=this,d=c.$preview,e=c.deleteExtraData||{},f=b.FRAMES+" .kv-file-remove",g=function(){var a=c.isUploadable?c.previewCache.count():c.$element.get(0).files.length;0!==d.find(f).length||a||(c.reset(),c.initialCaption="")};c._initZoomButton(),d.find(f).each(function(){var f=a(this),h=f.data("url")||c.deleteUrl,i=f.data("key");if(!b.isEmpty(h)&&void 0!==i){var l,m,o,p,j=f.closest(b.FRAMES),k=c.previewCache.data,n=j.attr("data-fileindex");n=parseInt(n.replace("init_","")),o=b.isEmpty(k.config)&&b.isEmpty(k.config[n])?null:k.config[n],p=b.isEmpty(o)||b.isEmpty(o.extra)?e:o.extra,"function"==typeof p&&(p=p()),m={id:f.attr("id"),key:i,extra:p},l=a.extend(!0,{},{url:h,type:"POST",dataType:"json",data:a.extend(!0,{},{key:i},p),beforeSend:function(a){c.ajaxAborted=!1,c._raise("filepredelete",[i,a,p]),c.ajaxAborted?a.abort():(b.addCss(j,"file-uploading"),b.addCss(f,"disabled"))},success:function(a,e,h){var k,l;if(!b.isEmpty(a)&&!b.isEmpty(a.error))return m.jqXHR=h,m.response=a,c._showError(a.error,m,"filedeleteerror"),j.removeClass("file-uploading"),f.removeClass("disabled"),void g();n=parseInt(j.attr("data-fileindex").replace("init_","")),c.previewCache.unset(n),k=c.previewCache.count(),l=k>0?c._getMsgSelected(k):"",c._deleteFileIndex(j),c._setCaption(l),c._raise("filedeleted",[i,h,p]),j.removeClass("file-uploading").addClass("file-deleted"),j.fadeOut("slow",function(){b.cleanZoomCache(d.find("#zoom-"+j.attr("id"))),c._clearObjects(j),j.remove(),g(),k||0!==c.getFileStack().length||(c._setCaption(""),c.reset())})},error:function(a,b,d){var e=c.ajaxOperations.deleteThumb,f=c._parseError(e,a,d);m.jqXHR=a,m.response={},c._showError(f,m,"filedeleteerror"),j.removeClass("file-uploading"),g()}},c.ajaxDeleteSettings),c._handler(f,"click",function(){if(!c._validateMinCount())return!1;a.ajax(l)})}})},_hideFileIcon:function(){this.overwriteInitial&&this.$captionContainer.find(".kv-caption-icon").hide()},_showFileIcon:function(){this.$captionContainer.find(".kv-caption-icon").show()},_getSize:function(b){var e,g,h,c=this,d=parseFloat(b),f=c.fileSizeGetter;return a.isNumeric(b)&&a.isNumeric(d)?("function"==typeof f?h=f(d):0===d?h="0.00 B":(e=Math.floor(Math.log(d)/Math.log(1024)),g=["B","KB","MB","GB","TB","PB","EB","ZB","YB"],h=1*(d/Math.pow(1024,e)).toFixed(2)+" "+g[e]),c._getLayoutTemplate("size").replace("{sizeText}",h)):""},_generatePreviewTemplate:function(c,d,e,f,g,h,i,j,k,l,m){var n=this,o=n.slug(e),q="",r=n.previewSettings[c]||n.defaults.previewSettings[c],s=r&&r.width?r.width:"",t=r&&r.height?r.height:"",u=k||n._renderFileFooter(o,i,b.isEmpty(s)?"auto":s,h),v=n._getPreviewIcon(e),w="type-default",x=v&&n.preferIconicPreview,y=v&&n.preferIconicZoomPreview,z=function(d,h,i,k){var p=i?"zoom-"+g:g,q=n._getPreviewTemplate(d),r=(j||"")+" "+k;return n.frameClass&&(r=n.frameClass+" "+r),i&&(r=r.replace(" "+b.SORT_CSS,"")),q=n._parseFilePreviewIcon(q,e),"text"===d&&(h=b.htmlEncode(h)),"object"!==c||f||a.each(n.defaults.fileTypeSettings,function(a,b){"object"!==a&&"other"!==a&&b(e,f)&&(w="type-"+a)}),q.setTokens({previewId:p,caption:o,frameClass:r,type:f,fileindex:l,width:s,height:t,typeCss:w,footer:u,data:h,template:m||c})};return l=l||g.slice(g.lastIndexOf("-")+1),n.fileActionSettings.showZoom&&(q=z(y?"other":c,d,!0,"kv-zoom-thumb")),q="\n"+n._getLayoutTemplate("zoomCache").replace("{zoomContent}",q),z(x?"other":c,d,!1,"kv-preview-thumb")+q},_previewDefault:function(c,d,e){var f=this,g=f.$preview;if(f.showPreview){var j,h=c?c.name:"",i=c?c.type:"",k=c.size||0,l=f.slug(h),m=!0===e&&!f.isUploadable,n=b.objUrl.createObjectURL(c);f._clearDefaultPreview(),j=f._generatePreviewTemplate("other",n,h,i,d,m,k),g.append("\n"+j),f._setThumbAttr(d,l,k),!0===e&&f.isUploadable&&f._setThumbStatus(a("#"+d),"Error")}},_previewFile:function(a,c,d,e,f){if(this.showPreview){var r,g=this,h=g._parseFileType(c),i=c?c.name:"",j=g.slug(i),k=g.allowedPreviewTypes,l=g.allowedPreviewMimeTypes,m=g.$preview,n=k&&k.indexOf(h)>=0,o=c.size||0,p=c.type,q="text"===h||"html"===h||"image"===h?d.target.result:f,s=l&&-1!==l.indexOf(p);if("html"===h&&g.purifyHtml&&window.DOMPurify&&(q=window.DOMPurify.sanitize(q)),n||s){r=g._generatePreviewTemplate(h,q,i,p,e,!1,o),g._clearDefaultPreview(),m.append("\n"+r);var t=m.find("#"+e+" img");t.length&&g.autoOrientImage?b.validateOrientation(c,function(a){if(a){var d=m.find("#zoom-"+e+" img"),f="rotate-"+a;a>4&&(f+=t.width()>t.height()?" is-portrait-gt4":" is-landscape-gt4"),b.addCss(t,f),b.addCss(d,f),g._raise("fileimageoriented",{$img:t,file:c})}g._validateImage(e,j,p,o),b.adjustOrientedImage(t)}):g._validateImage(e,j,p,o)}else g._previewDefault(c,e);g._setThumbAttr(e,j,o),g._initSortable()}},_setThumbAttr:function(b,c,d){var e=this,f=a("#"+b);f.length&&(d=d&&d>0?e._getSize(d):"",f.data({caption:c,size:d}))},_setInitThumbAttr:function(){var e,f,g,h,a=this,c=a.previewCache.data,d=a.previewCache.count(!0);if(0!==d)for(var i=0;i<d;i++)e=c.config[i],h=a.previewInitId+"-init_"+i,f=b.ifSet("caption",e,b.ifSet("filename",e)),g=b.ifSet("size",e),a._setThumbAttr(h,f,g)},_slugDefault:function(a){return b.isEmpty(a)?"":String(a).replace(/[\-\[\]\/\{}:;#%=\(\)\*\+\?\\\^\$\|<>&"']/g,"_")},_readFiles:function(c){this.reader=new FileReader;var p,d=this,e=d.$element,f=d.$preview,g=d.reader,h=d.$previewContainer,i=d.$previewStatus,j=d.msgLoading,k=d.msgProgress,l=d.previewInitId,m=c.length,n=d.fileTypeSettings,o=d.filestack.length,q=d.allowedFileTypes,r=q?q.length:0,s=d.allowedFileExtensions,t=b.isEmpty(s)?"":s.join(", "),u=d.maxFilePreviewSize&&parseFloat(d.maxFilePreviewSize),v=f.length&&(!u||isNaN(u)),w=function(b,e,f,g){var h=a.extend(!0,{},d._getOutData({},{},c),{id:f,index:g}),i={id:f,index:g,file:e,files:c};return d._previewDefault(e,f,!0),d.isUploadable&&(d.addToStack(void 0),setTimeout(function(){p(g+1)},100)),d._initFileActions(),d.removeFromPreviewOnError&&a("#"+f).remove(),d.isUploadable?d._showUploadError(b,h):d._showError(b,i)};d.loadedImages=[],d.totalImagesCount=0,a.each(c,function(a,b){var c=d.fileTypeSettings.image;c&&c(b.type)&&d.totalImagesCount++}),p=function(a){if(b.isEmpty(e.attr("multiple"))&&(m=1),a>=m)return d.isUploadable&&d.filestack.length>0?d._raise("filebatchselected",[d.getFileStack()]):d._raise("filebatchselected",[c]),h.removeClass("file-thumb-loading"),void i.html("");var z,A,C,F,G,J,K,L,M,P,x=o+a,y=l+"-"+x,B=c[a],D=B.name?d.slug(B.name):"",E=(B.size||0)/1e3,H="",I=b.objUrl.createObjectURL(B),N=0,O="";if(r>0)for(F=0;F<r;F++)L=q[F],M=d.msgFileTypes[L]||L,O+=0===F?M:", "+M;if(!1===D)return void p(a+1);if(0===D.length)return G=d.msgInvalidFileName.replace("{name}",b.htmlEncode(B.name)),void(d.isError=w(G,B,y,a));if(b.isEmpty(s)||(H=new RegExp("\\.("+s.join("|")+")$","i")),C=E.toFixed(2),d.maxFileSize>0&&E>d.maxFileSize)return G=d.msgSizeTooLarge.setTokens({name:D,size:C,maxSize:d.maxFileSize}),void(d.isError=w(G,B,y,a));if(null!==d.minFileSize&&E<=b.getNum(d.minFileSize))return G=d.msgSizeTooSmall.setTokens({name:D,size:C,minSize:d.minFileSize}),void(d.isError=w(G,B,y,a));if(!b.isEmpty(q)&&b.isArray(q)){for(F=0;F<q.length;F+=1)J=q[F],P=n[J],N+=P&&"function"==typeof P&&P(B.type,B.name)?1:0;if(0===N)return G=d.msgInvalidFileType.setTokens({name:D,types:O}),void(d.isError=w(G,B,y,a))}return 0!==N||b.isEmpty(s)||!b.isArray(s)||b.isEmpty(H)||(K=b.compare(D,H),0!==(N+=b.isEmpty(K)?0:K.length))?d.showPreview?!v&&E>u?(d.addToStack(B),h.addClass("file-thumb-loading"),d._previewDefault(B,y),d._initFileActions(),d._updateFileDetails(m),void p(a+1)):(f.length&&void 0!==FileReader?(i.html(j.replace("{index}",a+1).replace("{files}",m)),h.addClass("file-thumb-loading"),g.onerror=function(a){d._errorHandler(a,D)},g.onload=function(b){d._previewFile(a,B,b,y,I),d._initFileActions()},g.onloadend=function(){G=k.setTokens({index:a+1,files:m,percent:50,name:D}),setTimeout(function(){i.html(G),d._updateFileDetails(m),p(a+1)},100),d._raise("fileloaded",[B,y,a,g])},g.onprogress=function(b){if(b.lengthComputable){var c=b.loaded/b.total*100,d=Math.ceil(c);G=k.setTokens({index:a+1,files:m,percent:d,name:D}),setTimeout(function(){i.html(G)},100)}},z=n.text,A=n.image,z(B.type,D)?g.readAsText(B,d.textEncoding):A(B.type,D)?g.readAsDataURL(B):g.readAsArrayBuffer(B)):(d._previewDefault(B,y),setTimeout(function(){p(a+1),d._updateFileDetails(m)},100),d._raise("fileloaded",[B,y,a,g])),void d.addToStack(B)):(d.isUploadable&&d.addToStack(B),setTimeout(function(){p(a+1),d._updateFileDetails(m)},100),void d._raise("fileloaded",[B,y,a,g])):(G=d.msgInvalidFileExtension.setTokens({name:D,extensions:t}),void(d.isError=w(G,B,y,a)))},p(0),d._updateFileDetails(m,!1)},_updateFileDetails:function(a){var c=this,d=c.$element,e=c.getFileStack(),f=b.isIE(9)&&b.findFileName(d.val())||d[0].files[0]&&d[0].files[0].name||e.length&&e[0].name||"",g=c.slug(f),h=c.isUploadable?e.length:a,i=c.previewCache.count()+h,j=h>1?c._getMsgSelected(i):g;c.isError?(c.$previewContainer.removeClass("file-thumb-loading"),c.$previewStatus.html(""),c.$captionContainer.find(".kv-caption-icon").hide()):c._showFileIcon(),c._setCaption(j,c.isError),c.$container.removeClass("file-input-new file-input-ajax-new"),1===arguments.length&&c._raise("fileselect",[a,g]),c.previewCache.count()&&c._initPreviewActions()},_setThumbStatus:function(a,b){var c=this;if(c.showPreview){var d="indicator"+b,e=d+"Title",f="file-preview-"+b.toLowerCase(),g=a.find(".file-upload-indicator"),h=c.fileActionSettings;a.removeClass("file-preview-success file-preview-error file-preview-loading"),"Error"===b&&a.find(".kv-file-upload").attr("disabled",!0),"Success"===b&&(a.find(".file-drag-handle").remove(),g.css("margin-left",0)),g.html(h[d]),g.attr("title",h[e]),a.addClass(f)}},_setProgressCancelled:function(){var a=this;a._setProgress(101,a.$progress,a.msgCancelled)},_setProgress:function(a,c,d){var g,e=this,f=Math.min(a,100),h=e.progressUploadThreshold,i=a<=100?e.progressTemplate:e.progressCompleteTemplate,j=f<100?e.progressTemplate:d?e.progressErrorTemplate:i;c=c||e.$progress,b.isEmpty(j)||(g=h&&f>h&&a<=100?j.setTokens({percent:h,status:e.msgUploadThreshold}):j.setTokens({percent:f,status:a>100?e.msgUploadEnd:f+"%"}),c.html(g),d&&c.find('[role="progressbar"]').html(d))},_setFileDropZoneTitle:function(){var e,a=this,c=a.$container.find(".file-drop-zone"),d=a.dropZoneTitle;a.isClickable&&(e=b.isEmpty(a.$element.attr("multiple"))?a.fileSingle:a.filePlural,d+=a.dropZoneClickTitle.replace("{files}",e)),c.find("."+a.dropZoneTitleClass).remove(),a.isUploadable&&a.showPreview&&0!==c.length&&!(a.getFileStack().length>0)&&a.dropZoneEnabled&&(0===c.find(b.FRAMES).length&&b.isEmpty(a.defaultPreviewContent)&&c.prepend('<div class="'+a.dropZoneTitleClass+'">'+d+"</div>"),a.$container.removeClass("file-input-new"),b.addCss(a.$container,"file-input-ajax-new"))},_setAsyncUploadStatus:function(b,c,d){var e=this,f=0;e._setProgress(c,a("#"+b).find(".file-thumb-progress")),e.uploadStatus[b]=c,a.each(e.uploadStatus,function(a,b){f+=b}),e._setProgress(Math.floor(f/d))},_validateMinCount:function(){var a=this,b=a.isUploadable?a.getFileStack().length:a.$element.get(0).files.length;return!(a.validateInitialCount&&a.minFileCount>0&&a._getFileCount(b-1)<a.minFileCount)||(a._noFilesError({}),!1)},_getFileCount:function(a){var b=this,c=0;return b.validateInitialCount&&!b.overwriteInitial&&(c=b.previewCache.count(),a+=c),a},_getFileId:function(a){var d,b=this,c=b.generateFileId;return"function"==typeof c?c(a,event):a?(d=a.webkitRelativePath||a.fileName||a.name||null,d?a.size+"-"+d.replace(/[^0-9a-zA-Z_-]/gim,""):null):null},_getFileName:function(a){return a&&a.name?this.slug(a.name):void 0},_getFileIds:function(a){return this.fileids.filter(function(b){return a?void 0!==b:void 0!==b&&null!==b})},_getFileNames:function(a){return this.filenames.filter(function(b){return a?void 0!==b:void 0!==b&&null!==b})},_setPreviewError:function(a,b,c){var d=this;void 0!==b&&d.updateStack(b,c),d.removeFromPreviewOnError?a.remove():d._setThumbStatus(a,"Error")},_checkDimensions:function(a,c,d,e,f,g,h){var j,k,n,i=this,l="Small"===c?"min":"max",m=i[l+"Image"+g];!b.isEmpty(m)&&d.length&&(n=d[0],k="Width"===g?n.naturalWidth||n.width:n.naturalHeight||n.height,("Small"===c?k>=m:k<=m)||(j=i["msgImage"+g+c].setTokens({name:f,size:m}),i._showUploadError(j,h),i._setPreviewError(e,a,null)))},_validateImage:function(a,b,c,d){var g,h,i,e=this,f=e.$preview,j=f.find("#"+a),k=j.attr("data-fileindex"),l=j.find("img");b=b||"Untitled",l.length&&e._handler(l,"load",function(){h=j.width(),i=f.width(),h>i&&(l.css("width","100%"),j.css("width","97%")),g={ind:k,id:a},e._checkDimensions(k,"Small",l,j,b,"Width",g),e._checkDimensions(k,"Small",l,j,b,"Height",g),e.resizeImage||(e._checkDimensions(k,"Large",l,j,b,"Width",g),e._checkDimensions(k,"Large",l,j,b,"Height",g)),e._raise("fileimageloaded",[a]),e.loadedImages.push({ind:k,img:l,thumb:j,pid:a,typ:c,siz:d,validated:!1}),e._validateAllImages()})},_validateAllImages:function(){var b,e,f,a=this,c={val:0},d=a.loadedImages.length,g=a.resizeIfSizeMoreThan;if(d===a.totalImagesCount&&(a._raise("fileimagesloaded"),a.resizeImage))for(b=0;b<a.loadedImages.length;b++)e=a.loadedImages[b],e.validated||(f=e.siz,f&&f>1e3*g&&a._getResizedImage(e,c,d),a.loadedImages[b].validated=!0)},_getResizedImage:function(b,c,d){var m,n,u,v,e=this,f=a(b.img)[0],g=f.naturalWidth,h=f.naturalHeight,i=1,j=e.maxImageWidth||g,k=e.maxImageHeight||h,l=!(!g||!h),o=e.imageCanvas,p=e.imageCanvasContext,q=b.typ,r=b.pid,s=b.ind,t=b.thumb;if(u=function(a,b,c){e.isUploadable?e._showUploadError(a,b,c):e._showError(a,b,c),e._setPreviewError(t,s)},(!e.filestack[s]||!l||g<=j&&h<=k)&&(l&&e.filestack[s]&&e._raise("fileimageresized",[r,s]),c.val++,c.val===d&&e._raise("fileimagesresized"),!l))return void u(e.msgImageResizeError,{id:r,index:s},"fileimageresizeerror");q=q||e.resizeDefaultImageType,m=g>j,n=h>k,i="width"===e.resizePreference?m?j/g:n?k/h:1:n?k/h:m?j/g:1,e._resetCanvas(),g*=i,h*=i,o.width=g,o.height=h;try{p.drawImage(f,0,0,g,h),o.toBlob(function(a){e.filestack[s]=a,e._raise("fileimageresized",[r,s]),c.val++,c.val===d&&e._raise("fileimagesresized",[void 0,void 0]),a instanceof Blob||u(e.msgImageResizeError,{id:r,index:s},"fileimageresizeerror")},q,e.resizeQuality)}catch(a){c.val++,c.val===d&&e._raise("fileimagesresized",[void 0,void 0]),v=e.msgImageResizeException.replace("{errors}",a.message),u(v,{id:r,index:s},"fileimageresizeexception")}},_initBrowse:function(a){var b=this;b.showBrowse?(b.$btnFile=a.find(".btn-file"),b.$btnFile.append(b.$element)):b.$element.hide()},_initCaption:function(){var a=this,c=a.initialCaption||"";return a.overwriteInitial||b.isEmpty(c)?(a.$caption.html(""),!1):(a._setCaption(c),!0)},_setCaption:function(c,d){var f,g,h,i,e=this,j=e.getFileStack();if(e.$caption.length){if(d)f=a("<div>"+e.msgValidationError+"</div>").text(),h=j.length,i=h?1===h&&j[0]?e._getFileNames()[0]:e._getMsgSelected(h):e._getMsgSelected(e.msgNo),g='<span class="'+e.msgValidationErrorClass+'">'+e.msgValidationErrorIcon+(b.isEmpty(c)?i:c)+"</span>";else{if(b.isEmpty(c))return;f=a("<div>"+c+"</div>").text(),g=e._getLayoutTemplate("fileIcon")+f}e.$caption.html(g),e.$caption.attr("title",f),e.$captionContainer.find(".file-caption-ellipsis").attr("title",f)}},_createContainer:function(){var b=this,c=a(document.createElement("div")).attr({class:"file-input file-input-new"}).html(b._renderMain());return b.$element.before(c),b._initBrowse(c),b.theme&&c.addClass("theme-"+b.theme),c},_refreshContainer:function(){var a=this,b=a.$container;b.before(a.$element),b.html(a._renderMain()),a._initBrowse(b)},_renderMain:function(){var a=this,b=a.isUploadable&&a.dropZoneEnabled?" file-drop-zone":"file-drop-disabled",c=a.showClose?a._getLayoutTemplate("close"):"",d=a.showPreview?a._getLayoutTemplate("preview").setTokens({class:a.previewClass,dropClass:b}):"",e=a.isDisabled?a.captionClass+" file-caption-disabled":a.captionClass,f=a.captionTemplate.setTokens({class:e+" kv-fileinput-caption"});return a.mainTemplate.setTokens({class:a.mainClass+(!a.showBrowse&&a.showCaption?" no-browse":""),preview:d,close:c,caption:f,upload:a._renderButton("upload"),remove:a._renderButton("remove"),cancel:a._renderButton("cancel"),browse:a._renderButton("browse")})},_renderButton:function(a){var c=this,d=c._getLayoutTemplate("btnDefault"),e=c[a+"Class"],f=c[a+"Title"],g=c[a+"Icon"],h=c[a+"Label"],i=c.isDisabled?" disabled":"",j="button";switch(a){case"remove":if(!c.showRemove)return"";break;case"cancel":if(!c.showCancel)return"";e+=" hide";break;case"upload":if(!c.showUpload)return"";c.isUploadable&&!c.isDisabled?d=c._getLayoutTemplate("btnLink").replace("{href}",c.uploadUrl):j="submit";break;case"browse":if(!c.showBrowse)return"";d=c._getLayoutTemplate("btnBrowse");break;default:return""}return e+="browse"===a?" btn-file":" fileinput-"+a+" fileinput-"+a+"-button",b.isEmpty(h)||(h=' <span class="'+c.buttonLabelClass+'">'+h+"</span>"),d.setTokens({type:j,css:e,title:f,status:i,icon:g,label:h})},_renderThumbProgress:function(){var a=this;return'<div class="file-thumb-progress hide">'+a.progressTemplate.setTokens({percent:"0",status:a.msgUploadBegin})+"</div>"},_renderFileFooter:function(a,c,d,e){var l,f=this,g=f.fileActionSettings,h=g.showRemove,i=g.showDrag,j=g.showUpload,k=g.showZoom,m=f._getLayoutTemplate("footer"),n=e?g.indicatorError:g.indicatorNew,o=f._getLayoutTemplate("indicator"),p=e?g.indicatorErrorTitle:g.indicatorNewTitle,q=o.setTokens({indicator:n,indicatorTitle:p});return c=f._getSize(c),l=f.isUploadable?m.setTokens({actions:f._renderFileActions(j,h,k,i,!1,!1,!1),caption:a,size:c,width:d,progress:f._renderThumbProgress(),indicator:q}):m.setTokens({actions:f._renderFileActions(!1,!1,k,i,!1,!1,!1),caption:a,size:c,width:d,progress:"",indicator:q}),l=b.replaceTags(l,f.previewThumbTags)},_renderFileActions:function(a,b,c,d,e,f,g,h){if(!(a||b||c||d))return"";var p,i=this,j=!1===f?"":' data-url="'+f+'"',k=!1===g?"":' data-key="'+g+'"',l="",m="",n="",o="",q=i._getLayoutTemplate("actions"),r=i.fileActionSettings,s=i.otherActionButtons.setTokens({dataKey:k}),t=e?r.removeClass+" disabled":r.removeClass;return b&&(l=i._getLayoutTemplate("actionDelete").setTokens({removeClass:t,removeIcon:r.removeIcon,removeTitle:r.removeTitle,dataUrl:j,dataKey:k})),a&&(m=i._getLayoutTemplate("actionUpload").setTokens({uploadClass:r.uploadClass,uploadIcon:r.uploadIcon,uploadTitle:r.uploadTitle})),c&&(n=i._getLayoutTemplate("actionZoom").setTokens({zoomClass:r.zoomClass,zoomIcon:r.zoomIcon,zoomTitle:r.zoomTitle})),d&&h&&(p="drag-handle-init "+r.dragClass,o=i._getLayoutTemplate("actionDrag").setTokens({dragClass:p,dragTitle:r.dragTitle,dragIcon:r.dragIcon})),q.setTokens({delete:l,upload:m,zoom:n,drag:o,other:s})},_browse:function(a){var b=this;b._raise("filebrowse"),a&&a.isDefaultPrevented()||(b.isError&&!b.isUploadable&&b.clear(),b.$captionContainer.focus())},_filterDuplicate:function(a,b,c){var d=this,e=d._getFileId(a);e&&c&&c.indexOf(e)>-1||(c||(c=[]),b.push(a),c.push(e))},_change:function(c){var d=this,e=d.$element;if(!d.isUploadable&&b.isEmpty(e.val())&&d.fileInputCleared)return void(d.fileInputCleared=!1);d.fileInputCleared=!1;var g,h,k,l,f=[],i=arguments.length>1,j=d.isUploadable,m=i?c.originalEvent.dataTransfer.files:e.get(0).files,n=d.filestack.length,o=b.isEmpty(e.attr("multiple")),p=o&&n>0,q=0,r=d._getFileIds(),s=function(b,c,e,f){var g=a.extend(!0,{},d._getOutData({},{},m),{id:e,index:f}),h={id:e,index:f,file:c,files:m};return d.isUploadable?d._showUploadError(b,g):d._showError(b,h)};if(d.reader=null,d._resetUpload(),d._hideFileIcon(),d.isUploadable&&d.$container.find(".file-drop-zone ."+d.dropZoneTitleClass).remove(),i?a.each(m,function(a,b){b&&!b.type&&void 0!==b.size&&b.size%4096==0?q++:d._filterDuplicate(b,f,r)}):(m=c.target&&void 0===c.target.files?c.target.value?[{name:c.target.value.replace(/^.+\\/,"")}]:[]:c.target.files||{},j?a.each(m,function(a,b){d._filterDuplicate(b,f,r)}):f=m),b.isEmpty(f)||0===f.length)return j||d.clear(),d._showFolderError(q),void d._raise("fileselectnone");if(d._resetErrors(),l=f.length,h=d._getFileCount(d.isUploadable?d.getFileStack().length+l:l),d.maxFileCount>0&&h>d.maxFileCount){if(!d.autoReplace||l>d.maxFileCount)return k=d.autoReplace&&l>d.maxFileCount?l:h,g=d.msgFilesTooMany.replace("{m}",d.maxFileCount).replace("{n}",k),d.isError=s(g,null,null,null),d.$captionContainer.find(".kv-caption-icon").hide(),d._setCaption("",!0),void d.$container.removeClass("file-input-new file-input-ajax-new");h>d.maxFileCount&&d._resetPreviewThumbs(j)}else!j||p?(d._resetPreviewThumbs(!1),p&&d.clearStack()):!j||0!==n||d.previewCache.count()&&!d.overwriteInitial||d._resetPreviewThumbs(!0);d.isPreviewable?d._readFiles(f):d._updateFileDetails(1),d._showFolderError(q)},_abort:function(b){var d,c=this;return!(!c.ajaxAborted||"object"!=typeof c.ajaxAborted||void 0===c.ajaxAborted.message)&&(d=a.extend(!0,{},c._getOutData(),b),d.abortData=c.ajaxAborted.data||{},d.abortMessage=c.ajaxAborted.message,c._setProgress(101,c.$progress,c.msgCancelled),c._showUploadError(c.ajaxAborted.message,d,"filecustomerror"),c.cancel(),!0)},_resetFileStack:function(){var c=this,d=0,e=[],f=[],g=[];c._getThumbs().each(function(){var l,h=a(this),i=h.attr("data-fileindex"),j=c.filestack[i],k=h.attr("id");"-1"!==i&&-1!==i&&(void 0!==j?(e[d]=j,f[d]=c._getFileName(j),g[d]=c._getFileId(j),h.attr({id:c.previewInitId+"-"+d,"data-fileindex":d}),d++):(l="uploaded-"+b.uniqId(),h.attr({id:l,"data-fileindex":"-1"}),c.$preview.find("#zoom-"+k).attr("id","zoom-"+l)))}),c.filestack=e,c.filenames=f,c.fileids=g},_isFileSelectionValid:function(a){var b=this;return a=a||0,b.required&&!b.getFilesCount()?(b.$errorContainer.html(""),b._showUploadError(b.msgFileRequired),!1):!(b.minFileCount>0&&b._getFileCount(a)<b.minFileCount)||(b._noFilesError({}),!1)},clearStack:function(){var a=this;return a.filestack=[],a.filenames=[],a.fileids=[],a.$element},updateStack:function(a,b){var c=this;return c.filestack[a]=b,c.filenames[a]=c._getFileName(b),c.fileids[a]=b&&c._getFileId(b)||null,c.$element},addToStack:function(a){var b=this;return b.filestack.push(a),b.filenames.push(b._getFileName(a)),b.fileids.push(b._getFileId(a)),b.$element},getFileStack:function(a){return this.filestack.filter(function(b){return a?void 0!==b:void 0!==b&&null!==b})},getFilesCount:function(){var a=this,b=a.isUploadable?a.getFileStack().length:a.$element.get(0).files.length;return a._getFileCount(b)},lock:function(){var a=this;return a._resetErrors(),a.disable(),a.showRemove&&b.addCss(a.$container.find(".fileinput-remove"),"hide"),a.showCancel&&a.$container.find(".fileinput-cancel").removeClass("hide"),a._raise("filelock",[a.filestack,a._getExtraData()]),a.$element},unlock:function(a){var c=this;return void 0===a&&(a=!0),c.enable(),c.showCancel&&b.addCss(c.$container.find(".fileinput-cancel"),"hide"),c.showRemove&&c.$container.find(".fileinput-remove").removeClass("hide"),a&&c._resetFileStack(),c._raise("fileunlock",[c.filestack,c._getExtraData()]),c.$element},cancel:function(){var e,b=this,c=b.ajaxRequests,d=c.length;if(d>0)for(e=0;e<d;e+=1)b.cancelling=!0,c[e].abort();return b._setProgressCancelled(),b._getThumbs().each(function(){var c=a(this),d=c.attr("data-fileindex");c.removeClass("file-uploading"),void 0!==b.filestack[d]&&(c.find(".kv-file-upload").removeClass("disabled").removeAttr("disabled"),c.find(".kv-file-remove").removeClass("disabled").removeAttr("disabled")),b.unlock()}),b.$element},clear:function(){var d,c=this;if(c._raise("fileclear"))return c.$btnUpload.removeAttr("disabled"),c._getThumbs().find("video,audio,img").each(function(){b.cleanMemory(a(this))}),c._resetUpload(),c.clearStack(),c._clearFileInput(),c._resetErrors(!0),c._hasInitialPreview()?(c._showFileIcon(),c._resetPreview(),c._initPreviewActions(),c.$container.removeClass("file-input-new")):(c._getThumbs().each(function(){c._clearObjects(a(this))}),c.isUploadable&&(c.previewCache.data={}),c.$preview.html(""),d=!c.overwriteInitial&&c.initialCaption.length>0?c.initialCaption:"",c.$caption.html(d),c.$caption.attr("title",""),b.addCss(c.$container,"file-input-new"),c._validateDefaultPreview()),0===c.$container.find(b.FRAMES).length&&(c._initCaption()||c.$captionContainer.find(".kv-caption-icon").hide()),c._hideFileIcon(),c._raise("filecleared"),c.$captionContainer.focus(),c._setFileDropZoneTitle(),c.$element},reset:function(){var a=this;if(a._raise("filereset"))return a._resetPreview(),a.$container.find(".fileinput-filename").text(""),b.addCss(a.$container,"file-input-new"),(a.$preview.find(b.FRAMES).length||a.isUploadable&&a.dropZoneEnabled)&&a.$container.removeClass("file-input-new"),a._setFileDropZoneTitle(),a.clearStack(),a.formdata={},a.$element},disable:function(){var a=this;return a.isDisabled=!0,a._raise("filedisabled"),a.$element.attr("disabled","disabled"),a.$container.find(".kv-fileinput-caption").addClass("file-caption-disabled"),a.$container.find(".btn-file, .fileinput-remove, .fileinput-upload, .file-preview-frame button").attr("disabled",!0),a._initDragDrop(),a.$element},enable:function(){var a=this;return a.isDisabled=!1,a._raise("fileenabled"),a.$element.removeAttr("disabled"),a.$container.find(".kv-fileinput-caption").removeClass("file-caption-disabled"),a.$container.find(".btn-file, .fileinput-remove, .fileinput-upload, .file-preview-frame button").removeAttr("disabled"),a._initDragDrop(),a.$element},upload:function(){var e,f,g,c=this,d=c.getFileStack().length,h=!a.isEmptyObject(c._getExtraData());if(c.isUploadable&&!c.isDisabled&&c._isFileSelectionValid(d)){if(c._resetUpload(),0===d&&!h)return void c._showUploadError(c.msgUploadEmpty);if(c.$progress.removeClass("hide"),c.uploadCount=0,c.uploadStatus={},c.uploadLog=[],c.lock(),c._setProgress(2),0===d&&h)return void c._uploadExtraOnly();if(g=c.filestack.length,c.hasInitData=!1,!c.uploadAsync)return c._uploadBatch(),c.$element;for(f=c._getOutData(),c._raise("filebatchpreupload",[f]),c.fileBatchCompleted=!1,c.uploadCache={content:[],config:[],tags:[],append:!0},c.uploadAsyncCount=c.getFileStack().length,e=0;e<g;e++)c.uploadCache.content[e]=null,c.uploadCache.config[e]=null,c.uploadCache.tags[e]=null;for(c.$preview.find(".file-preview-initial").removeClass(b.SORT_CSS),c._initSortable(),c.cacheInitialPreview=c.getPreview(),e=0;e<g;e++)void 0!==c.filestack[e]&&c._uploadSingle(e,c.filestack,!0)}},destroy:function(){var b=this,c=b.$form,d=b.$container,e=b.$element,f=b.namespace;return a(document).off(f),a(window).off(f),c&&c.length&&c.off(f),b.isUploadable&&b._clearFileInput(),b._cleanup(),b._initPreviewCache(),e.insertBefore(d).off(f).removeData(),d.off().remove(),e},refresh:function(b){var c=this,d=c.$element;return b=b?a.extend(!0,{},c.options,b):c.options,c.destroy(),d.fileinput(b),c=d.data("fileinput"),c.isUploadable&&c._clearFileInput(),d.val()&&d.trigger("change.fileinput"),d},zoom:function(c){var d=this,e=a("#"+c),f=d.$modal;if(!e.length)return void d._log('Cannot zoom to detailed preview! Invalid frame with id: "'+c+'".');b.initModal(f),f.html(d._getModalContent()),d._setZoomContent(e),f.modal("show"),d._initZoomButtons()},getPreview:function(){var a=this;return{content:a.initialPreview,config:a.initialPreviewConfig,tags:a.initialPreviewThumbTags}}},a.fn.fileinput=function(d){if(b.hasFileAPISupport()||b.isIE(9)){var e=Array.apply(null,arguments),f=[];switch(e.shift(),this.each(function(){var n,g=a(this),h=g.data("fileinput"),i="object"==typeof d&&d,j=i.theme||g.data("theme"),k={},l={},m=i.language||g.data("language")||a.fn.fileinput.defaults.language||"en";h||(j&&(l=a.fn.fileinputThemes[j]||{}),"en"===m||b.isEmpty(a.fn.fileinputLocales[m])||(k=a.fn.fileinputLocales[m]||{}),n=a.extend(!0,{},a.fn.fileinput.defaults,l,a.fn.fileinputLocales.en,k,i,g.data()),h=new c(this,n),g.data("fileinput",h)),"string"==typeof d&&f.push(h[d].apply(h,e))}),f.length){case 0:return this;case 1:return f[0];default:return f}}},a.fn.fileinput.defaults={language:"en",showCaption:!0,showBrowse:!0,showPreview:!0,showRemove:!0,showUpload:!0,showCancel:!0,showClose:!0,showUploadedThumbs:!0,browseOnZoneClick:!1,autoReplace:!1,autoOrientImage:!0,required:!1,generateFileId:null,previewClass:"",captionClass:"",frameClass:"krajee-default",mainClass:"file-caption-main",mainTemplate:null,purifyHtml:!0,fileSizeGetter:null,initialCaption:"",initialPreview:[],initialPreviewDelimiter:"*$$*",initialPreviewAsData:!1,initialPreviewFileType:"image",initialPreviewConfig:[],initialPreviewThumbTags:[],previewThumbTags:{},initialPreviewShowDelete:!0,removeFromPreviewOnError:!1,deleteUrl:"",deleteExtraData:{},overwriteInitial:!0,previewZoomButtonIcons:{prev:'<i class="fa fa-caret-left"></i>',next:'<i class="fa fa-caret-right"></i>',toggleheader:'<i class="fa fa-arrows-v"></i>',fullscreen:'<i class="fa fa-arrows-alt"></i>',borderless:'<i class="fa fa-expand"></i>',close:'<i class="fa fa-times"></i>'},previewZoomButtonClasses:{prev:"btn btn-navigate",next:"btn btn-navigate",toggleheader:"btn btn-default btn-header-toggle",fullscreen:"btn btn-default",borderless:"btn btn-default",close:"btn btn-default"},preferIconicPreview:!1,preferIconicZoomPreview:!1,allowedPreviewTypes:void 0,allowedPreviewMimeTypes:null,allowedFileTypes:null,allowedFileExtensions:null,defaultPreviewContent:null,customLayoutTags:{},customPreviewTags:{},previewFileIcon:'<i class="fa fa-file"></i>',previewFileIconClass:"file-other-icon",previewFileIconSettings:{},previewFileExtSettings:{},buttonLabelClass:"hidden-xs",browseIcon:'<i class="fa fa-folder-open"></i>&nbsp;',browseClass:"btn btn-primary",removeIcon:'<i class="fa fa-trash"></i>',removeClass:"btn btn-default",cancelIcon:'<i class="fa fa-ban"></i>',cancelClass:"btn btn-default",uploadIcon:'<i class="fa fa-upload"></i>',uploadClass:"btn btn-default",uploadUrl:null,uploadAsync:!0,uploadExtraData:{},zoomModalHeight:480,minImageWidth:null,minImageHeight:null,maxImageWidth:null,maxImageHeight:null,resizeImage:!1,resizePreference:"width",resizeQuality:.92,resizeDefaultImageType:"image/jpeg",resizeIfSizeMoreThan:0,minFileSize:0,maxFileSize:0,maxFilePreviewSize:25600,minFileCount:0,maxFileCount:0,validateInitialCount:!1,msgValidationErrorClass:"text-danger",msgValidationErrorIcon:'<i class="fa fa-exclamation"></i> ',msgErrorClass:"file-error-message",progressThumbClass:"progress-bar progress-bar-success progress-bar-striped active",progressClass:"progress-bar progress-bar-success progress-bar-striped active",progressCompleteClass:"progress-bar progress-bar-success",progressErrorClass:"progress-bar progress-bar-danger",progressUploadThreshold:99,previewFileType:"image",elCaptionContainer:null,elCaptionText:null,elPreviewContainer:null,elPreviewImage:null,elPreviewStatus:null,elErrorContainer:null,errorCloseButton:'<span class="close kv-error-close">&times;</span>',slugCallback:null,dropZoneEnabled:!0,dropZoneTitleClass:"file-drop-zone-title",fileActionSettings:{},otherActionButtons:"",textEncoding:"UTF-8",ajaxSettings:{},ajaxDeleteSettings:{},showAjaxErrorDetails:!0},a.fn.fileinputLocales.en={fileSingle:"file",filePlural:"files",browseLabel:"Browse &hellip;",removeLabel:"Remove",removeTitle:"Clear selected files",cancelLabel:"Cancel",cancelTitle:"Abort ongoing upload",uploadLabel:"Upload",uploadTitle:"Upload selected files",msgNo:"No",msgNoFilesSelected:"No files selected",msgCancelled:"Cancelled",msgZoomModalHeading:"Detailed Preview",msgFileRequired:"You must select a file to upload.",msgSizeTooSmall:'File "{name}" (<b>{size} KB</b>) is too small and must be larger than <b>{minSize} KB</b>.',msgSizeTooLarge:'File "{name}" (<b>{size} KB</b>) exceeds maximum allowed upload size of <b>{maxSize} KB</b>.',msgFilesTooLess:"You must select at least <b>{n}</b> {files} to upload.",msgFilesTooMany:"Number of files selected for upload <b>({n})</b> exceeds maximum allowed limit of <b>{m}</b>.",msgFileNotFound:'File "{name}" not found!',msgFileSecured:'Security restrictions prevent reading the file "{name}".',msgFileNotReadable:'File "{name}" is not readable.',msgFilePreviewAborted:'File preview aborted for "{name}".',msgFilePreviewError:'An error occurred while reading the file "{name}".',msgInvalidFileName:'Invalid or unsupported characters in file name "{name}".',msgInvalidFileType:'Invalid type for file "{name}". Only "{types}" files are supported.',msgInvalidFileExtension:'Invalid extension for file "{name}". Only "{extensions}" files are supported.',msgFileTypes:{image:"image",html:"HTML",text:"text",video:"video",audio:"audio",flash:"flash",pdf:"PDF",object:"object"},msgUploadAborted:"The file upload was aborted",msgUploadThreshold:"Processing...",msgUploadBegin:"Initializing...",msgUploadEnd:"Done",msgUploadEmpty:"No valid data available for upload.",msgValidationError:"Validation Error",msgLoading:"Loading file {index} of {files} &hellip;",msgProgress:"Loading file {index} of {files} - {name} - {percent}% completed.",msgSelected:"{n} {files} selected",msgFoldersNotAllowed:"Drag & drop files only! {n} folder(s) dropped were skipped.",msgImageWidthSmall:'Width of image file "{name}" must be at least {size} px.',msgImageHeightSmall:'Height of image file "{name}" must be at least {size} px.',msgImageWidthLarge:'Width of image file "{name}" cannot exceed {size} px.',msgImageHeightLarge:'Height of image file "{name}" cannot exceed {size} px.',msgImageResizeError:"Could not get the image dimensions to resize.",msgImageResizeException:"Error while resizing the image.<pre>{errors}</pre>",msgAjaxError:"Something went wrong with the {operation} operation. Please try again later!",msgAjaxProgressError:"{operation} failed",ajaxOperations:{deleteThumb:"file delete",uploadThumb:"file upload",uploadBatch:"batch file upload",uploadExtra:"form data upload"},dropZoneTitle:"Drag & drop files here &hellip;",dropZoneClickTitle:"<br>(or click to select {files})",previewZoomButtonTitles:{prev:"View previous file",next:"View next file",toggleheader:"Toggle header",fullscreen:"Toggle full screen",borderless:"Toggle borderless mode",close:"Close detailed preview"}},a.fn.fileinput.Constructor=c,a(document).ready(function(){var b=a("input.file[type=file]");b.length&&b.fileinput()})});